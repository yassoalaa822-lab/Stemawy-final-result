<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Checkpoints</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <!-- No Firebase module needed anymore -->

    <style>
        /* Apply Inter font family and smooth scrolling */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        /* --- Tech Aesthetic Colors and Glows --- */
        .shadow-subtle-glow {
            box-shadow: 0 4px 15px rgba(51, 255, 204, 0.25), 0 0 5px rgba(51, 255, 204, 0.1);
            transition: all 0.3s ease-in-out;
        }

        .hover\:shadow-subtle-glow-lg:hover {
            box-shadow: 0 6px 20px rgba(51, 255, 204, 0.4), 0 0 8px rgba(51, 255, 204, 0.2);
        }

        /* Keyframes for continuous gradient shift */
        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Base class for the animated text effect */
        .gradient-text-wrapper {
            display: inline-block;
            background-size: 300% 100%;
            animation: gradient-shift 8s linear infinite;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            line-height: 1.2;
            white-space: nowrap;
        }

        /* Style for the main header (Physics) */
        .gradient-h1 {
            background-image: linear-gradient(to right, #00BFFF, #33FFCC, #00BFFF, #33FFCC);
            animation-duration: 8s;
        }

        /* Light theme variables */
        :root[data-theme="light"] {
            --tech-bg: #ffffff;
            --tech-dark-alt: #f3f4f6;
            --tech-light: #111827;
            --tech-primary: #0369a1;
            --tech-secondary: #0e7490;
            --border-color: rgba(2, 132, 199, 0.3);
        }

        /* Dark theme variables (default) */
        :root[data-theme="dark"] {
            --tech-bg: #1A1F26;
            --tech-dark-alt: #2C333F;
            --tech-light: #E0E6F0;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(51, 255, 204, 0.3);
        }

        /* Space Theme Variables */
        :root[data-theme="space"] {
            --tech-bg: #050505;
            --tech-dark-alt: #0F1218;
            --tech-light: #ffffff;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(0, 191, 255, 0.3);
        }

        /* Midnight Synth Theme */
        :root[data-theme="midnight"] {
            --tech-bg: #1e1b4b;
            --tech-dark-alt: #312e81;
            --tech-light: #e0e7ff;
            --tech-primary: #f472b6;
            --tech-secondary: #818cf8;
            --border-color: rgba(244, 114, 182, 0.4);
        }

        /* Christmas Theme */
        :root[data-theme="christmas"] {
            --tech-bg: #2C0412;
            --tech-dark-alt: #460B1C;
            --tech-light: #FEEBC8;
            --tech-primary: #D4AF37;
            --tech-secondary: #228B22;
            --border-color: rgba(212, 175, 55, 0.4);
        }

        /* Helper classes to apply CSS variable values (overrides Tailwind utility colors) */
        body {
            background-color: var(--tech-bg);
            color: var(--tech-light);
        }

        .bg-tech-bg {
            background-color: var(--tech-bg) !important;
        }

        .bg-tech-dark-alt {
            background-color: var(--tech-dark-alt) !important;
        }

        .text-tech-light {
            color: var(--tech-light) !important;
        }

        .text-tech-primary {
            color: var(--tech-primary) !important;
        }

        .text-tech-secondary {
            color: var(--tech-secondary) !important;
        }

        .border-tech-primary\/30 {
            border-color: var(--border-color) !important;
        }

        /* Custom scrollbar style for the content area */
        #content-area {
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #00BFFF #1A1F26;
        }

        #content-area::-webkit-scrollbar {
            width: 8px;
        }

        #content-area::-webkit-scrollbar-thumb {
            background-color: #00BFFF;
            border-radius: 4px;
        }

        #content-area::-webkit-scrollbar-track {
            background-color: #1A1F26;
        }

        /* Custom style for the LO button when active */
        .lo-item.active {
            background-color: #00BFFF33;
            /* tech-primary with opacity */
            border-left-color: #33FFCC;
            /* tech-secondary */
            box-shadow: 0 0 10px rgba(51, 255, 204, 0.3);
        }

        /* Centered header title helper */
        .header-inner {
            position: relative;
        }

        .centered-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }

        /* Theme toggle button */
        .theme-toggle {
            padding: 0.5rem;
            border-radius: 9999px;
            transition: all 0.3s ease;
            color: var(--tech-light);
        }

        .theme-toggle:hover {
            background-color: var(--tech-primary);
            color: var(--tech-bg);
        }

        /* Details summary arrow rotation */
        details summary .arrow-icon {
            transform: rotate(0deg);
            transition: transform 0.3s;
        }

        details[open] summary .arrow-icon {
            transform: rotate(90deg);
        }

        /* Enforce CSS Variables */
        .bg-tech-bg {
            background-color: var(--tech-bg) !important;
        }

        .bg-tech-dark-alt {
            background-color: var(--tech-dark-alt) !important;
        }

        .text-tech-light {
            color: var(--tech-light) !important;
        }

        .text-tech-primary {
            color: var(--tech-primary) !important;
        }

        .text-tech-secondary {
            color: var(--tech-secondary) !important;
        }

        .border-tech-primary {
            border-color: var(--tech-primary) !important;
        }

        .border-tech-secondary {
            border-color: var(--tech-secondary) !important;
        }

        /* Christmas Theme */
        :root[data-theme="christmas"] {
            --tech-bg: #2C0412;
            --tech-dark-alt: #460B1C;
            --tech-light: #FDF5E6;
            --tech-primary: #FFD700;
            --tech-secondary: #006400;
            --border-color: rgba(255, 215, 0, 0.4);
        }

        /* Snow */
        #snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            display: none;
        }

        :root[data-theme="christmas"] #snow-container {
            display: block;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(110vh);
            }
        }

        /* RTL */
        [dir="rtl"] {
            font-family: 'Tajawal', 'Inter', sans-serif;
        }

        [dir="rtl"] .text-right-rtl {
            text-align: right;
        }

        [dir="rtl"] #sidebar {
            border-left: 1px solid var(--tech-primary);
            border-right: none;
            margin-left: 1.5rem;
            margin-right: 0;
        }

        #settings-modal {
            backdrop-filter: blur(5px);
        }

        /* --- Dark Neon Dynamic Background --- */
        .cyber-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
            display: none;
        }

        /* Only show in Dark Theme */
        :root[data-theme="dark"] .cyber-wrapper {
            display: block;
        }

        .cyber-grid {
            position: absolute;
            width: 200vw;
            height: 200vh;
            top: -50%;
            left: -50%;
            background-image:
                linear-gradient(rgba(0, 191, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 191, 255, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
            transform: perspective(500px) rotateX(60deg);
            animation: grid-move 20s linear infinite;
        }

        @keyframes grid-move {
            0% {
                transform: perspective(500px) rotateX(60deg) translateY(0);
            }

            100% {
                transform: perspective(500px) rotateX(60deg) translateY(60px);
            }
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: float-orb 20s infinite ease-in-out;
        }

        .orb-1 {
            top: 20%;
            left: 20%;
            width: 300px;
            height: 300px;
            background: rgba(0, 191, 255, 0.3);
            animation-duration: 25s;
        }

        .orb-2 {
            bottom: 20%;
            right: 20%;
            width: 400px;
            height: 400px;
            background: rgba(51, 255, 204, 0.2);
            animation-duration: 30s;
            animation-delay: -5s;
        }

        .orb-3 {
            top: 50%;
            left: 50%;
            width: 200px;
            height: 200px;
            background: rgba(138, 43, 226, 0.15);
            animation-duration: 20s;
            animation-delay: -10s;
        }

        @keyframes float-orb {

            0%,
            100% {
                transform: translate(0, 0);
            }

            33% {
                transform: translate(40px, -60px);
            }

            66% {
                transform: translate(-30px, 30px);
            }
        }

        /* Breathing Glow for Cards in Dark Mode */
        :root[data-theme="dark"] .subject-card,
        :root[data-theme="dark"] .comp-card,
        :root[data-theme="dark"] .lo-item,
        :root[data-theme="dark"] details {
            animation: breathing-glow 5s ease-in-out infinite;
        }

        :root[data-theme="dark"] .subject-card:hover,
        :root[data-theme="dark"] .comp-card:hover,
        :root[data-theme="dark"] .lo-item:hover,
        :root[data-theme="dark"] details[open] {
            animation: none;
        }

        @keyframes breathing-glow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(0, 191, 255, 0.05);
                border-color: rgba(0, 191, 255, 0.1);
            }

            50% {
                box-shadow: 0 0 15px rgba(51, 255, 204, 0.15);
                border-color: rgba(51, 255, 204, 0.3);
            }
        }

        /* Space Theme Variables */
        :root[data-theme="space"] {
            --tech-bg: #050505;
            --tech-dark-alt: #0F1218;
            --tech-light: #ffffff;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(0, 191, 255, 0.3);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">

    <script>
        // Tailwind Configuration with a Modern Tech Palette
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tech-bg': '#1A1F26',
                        'tech-dark-alt': '#2C333F',
                        'tech-light': '#E0E6F0',
                        'tech-primary': '#00BFFF',
                        'tech-secondary': '#33FFCC',
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-tech-bg text-tech-light min-h-screen flex flex-col">
    <!-- Dark Neon Background Effects -->
    <div class="cyber-wrapper">
        <div class="cyber-grid"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Header -->
    <header
        class="w-full bg-tech-dark-alt p-4 shadow-xl shadow-tech-primary/10 border-b border-tech-primary/30 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex justify-between items-center header-inner">
            <!-- Left: Back Button & Logo -->
            <div class="flex items-center space-x-4">
                <button onclick="window.location.href='../index.html'"
                    class="text-tech-light hover:text-tech-secondary transition duration-200 p-2 rounded-full hover:bg-tech-primary/20">
                    <!-- Back Arrow SVG Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5" />
                        <path d="m12 19-7-7 7-7" />
                    </svg>
                </button>

                <!-- NEW LOGO: "Stemawy" link -->
                <a href="../index.html"
                    class="flex items-center space-x-2 text-2xl font-extrabold transition duration-200 hover:opacity-80">
                    <span class="gradient-text-wrapper gradient-h1">Stemawy</span>
                </a>
            </div>

            <!-- Centered Title -->
            <h1 class="centered-title text-4xl font-extrabold tracking-tight">
                <span class="gradient-text-wrapper gradient-h1">PHYSICS</span>
            </h1>

            <!-- Right: Theme Toggle Button -->
            <div class="flex items-center">
                <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                    <svg id="theme-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Area: Sidebar and Main Section -->
    <main class="flex flex-1 overflow-hidden max-w-7xl mx-auto w-full p-4 sm:p-6">

        <!-- Left Sidebar (LO Navigation) -->
        <nav id="sidebar"
            class="w-full sm:w-64 bg-tech-dark-alt rounded-xl p-4 mr-6 flex-shrink-0 border border-tech-primary/20 h-full overflow-y-auto">
            <h2
                class="text-lg font-bold mb-4 text-tech-secondary uppercase tracking-wider border-b border-tech-secondary/30 pb-2">
                Learning Objectives</h2>
            <ul id="lo-list" class="space-y-2">
                <!-- LO items will be generated here -->
            </ul>
        </nav>

        <!-- Right Content Area -->
        <section id="content-area"
            class="flex-1 bg-tech-dark-alt rounded-xl p-6 border border-tech-primary/50 shadow-subtle-glow">
            <div id="dynamic-content" class="h-full">
                <!-- Default State -->
                <div id="default-message"
                    class="flex items-center justify-center h-full text-3xl font-light text-tech-light/50">
                    Please choose your checkpoint
                </div>
                <!-- Content will be rendered here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-tech-dark-alt p-4 mt-auto border-t border-tech-primary/30 relative z-20">
        <div class="section-container flex flex-col sm:flex-row justify-between items-center text-sm">
            <div class="text-center sm:text-left order-2 sm:order-1 mt-4 sm:mt-0">
                <span data-i18n="footer_contact">If you have any comments please text me</span> <a
                    href="mailto:yassoalaa822@gmail.com"
                    class="text-tech-secondary hover:text-tech-primary transition duration-200">yassoalaa822@gmail.com</a>
            </div>
            <div class="space-x-4 order-1 sm:order-2">
                <a href="#" id="open-settings" class="hover:text-tech-primary transition duration-200"
                    data-i18n="settings">Settings</a>
            </div>
        </div>
    </footer>
    <div id="snow-container"></div>
    <div id="settings-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div
            class="bg-tech-dark-alt rounded-2xl border border-tech-secondary/50 shadow-2xl p-6 w-full max-w-sm transform transition-all scale-100">
            <div class="flex justify-between items-center mb-6 border-b border-tech-primary/20 pb-4">
                <h3 class="text-2xl font-bold text-tech-primary" data-i18n="settings">Settings</h3>
                <button id="close-settings" class="text-tech-light hover:text-tech-secondary"><svg
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg></button>
            </div>
            <div class="mb-6">
                <h4 class="text-sm font-semibold text-tech-secondary uppercase tracking-wider mb-3"
                    data-i18n="language">Language</h4>
                <div class="grid grid-cols-2 gap-3"><button id="lang-en"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition">English</button><button
                        id="lang-ar"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition font-['Tajawal']">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                </div>
            </div>
            <!-- Theme Section -->
            <div class="mb-6">
                <h4 class="text-sm font-semibold text-tech-secondary uppercase tracking-wider mb-3" data-i18n="theme">
                    Theme</h4>
                <div class="grid grid-cols-2 gap-3">
                    <button id="theme-dark"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition">Dark
                        Neon</button>
                    <button id="theme-midnight"
                        class="p-2 rounded-lg border border-pink-500/50 hover:bg-pink-500/10 text-center transition text-pink-300">Midnight
                        ðŸŒ†</button>
                    <button id="theme-christmas"
                        class="p-2 rounded-lg border border-red-500/50 hover:bg-red-500/10 text-center transition text-red-300">Christmas
                        ðŸŽ„</button>
                    <button id="theme-space"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition text-tech-primary"
                        data-i18n="theme_space">Space ðŸš€</button>
                </div>
            </div>

            <button onclick="document.getElementById('settings-modal').classList.add('hidden')"
                class="w-full py-2 bg-tech-primary text-tech-bg font-bold rounded-lg hover:bg-tech-secondary transition"
                data-i18n="close">
                Close
            </button>
        </div>
    </div>
    <script src="../space-theme.js"></script>
    <script src="../theme-effects.js"></script>
    <script>
        // Define the data structure for all Learning Objectives and Concepts
        const learningObjectives = {
            LO1: {
                title: "LO1: Measurements and Units",
                concepts: [
                    "Physics as experimental science",
                    "Systems of measurements and standards",
                    "International system of units",
                    "Prefixes of metric units",
                    "From Macro to Nanoscale",
                    "Measurement errors",
                    "Measurement accuracy vs. precision",
                    "Dimensional analysis"
                ]
            },
            LO2: {
                title: "LO2: Forces and Equilibrium",
                concepts: [
                    "Forces",
                    "Static equilibrium",
                    "Dynamic equilibrium",
                    "System of forces",
                    "Newton's third law",
                    "Free body diagram",
                    "Action-Reaction Pairs",
                    "Point particle"
                ]
            },
            LO3: {
                title: "LO3: Motion and Newton's Laws",
                concepts: [
                    "Equilibrium vs. motion vs. change in motion",
                    "Force as a vector",
                    "Net force acting on a free body.",
                    "Newton's Laws of Motion",
                    "Centripetal acceleration",
                    "Centripetal force",
                    "Inertial reference frame"
                ]
            },
            LO4: {
                title: "LO4: Gravitation",
                concepts: [
                    "Mass",
                    "Gravity",
                    "Gravitational field",
                    "Weight",
                    "General Law of Gravitation",
                    "Newton's Second Law in gravitational field",
                    "Free Fall",
                    "Apparent weight"
                ]
            },
            LO5: {
                title: "LO5: Center of Mass and Rotational Equilibrium",
                concepts: [
                    "Center of mass",
                    "Torque",
                    "Static equilibrium",
                    "Translational vs. Rotational Equilibrium",
                    "The equilibrium torque condition: rotational analogue of Newton's Laws",
                    "Simple machines",
                    "The mechanical advantage of simple machines",
                    "Stability of extended rigid bodies depends on the sum of the forces, the sum of the torques and on the location of the center of mass."
                ]
            },
            LO6: {
                title: "LO6: Elasticity and Stress",
                concepts: [
                    "Elasticity & Hooke's Law",
                    "Range of validity for Hooke's Law",
                    "Stress and strain",
                    "Young's modulus"
                ]
            },
            LO7: {
                title: "LO7: Hooke's Law and Spring Systems",
                concepts: [
                    "Hooke's Law & Linear Springs",
                    "The spring constant",
                    "Yield point",
                    "Tension and compression"
                ]
            }
        };

        // Resource files found in the 'semester one' folders
        const resourceFiles = {
            LO1: [
                "semester one/LO1/LO1 Session (01) systems of measurement.pdf",
                "semester one/LO1/LO1 Session (02) Unit Conversion.pdf",
                "semester one/LO1/LO1 Session (03)  Measurement Errors.pdf",
                "semester one/LO1/LO1 Session (04)  Dimensional analysis.pdf",
                "semester one/LO1/Solutions of measurement problems  LO. 1.pdf"
            ],
            LO2: [
                "semester one/LO2/LO2 Session 07 Forces.pdf",
                "semester one/LO2/LO2 Session 08 Newton's 3rd law.pdf",
                "semester one/LO2/Newton_s 3rd law  LO. 2 - Answers.pdf"
            ],
            LO3: [
                "semester one/LO3/LO. 3 Circular motion Answers.pdf",
                "semester one/LO3/LO. 3 Newton_s 1st _ 2nd law - Questions and answers.pdf",
                "semester one/LO3/LO3 Session (09)  NewtonGÃ‡Ã–s Laws.pdf",
                "semester one/LO3/LO3 Session (10)  Net force.pdf",
                "semester one/LO3/LO3 Session (11) Net Force (Part 2).pdf",
                "semester one/LO3/LO3 Session (12)  CIRCULAR MOTION.pdf"
            ],
            LO4: [
                "semester one/LO4/LO. 4 Newton_s Universal law of gravitation answers.pdf",
                "semester one/LO4/LO4 Session (13)  NewtonGÃ‡Ã–s Law of Universal Gravitation.pdf",
                "semester one/LO4/LO4 Session (14)  Apparent weight &  Free fall.pdf"
            ],
            LO5: [
                "semester one/LO5/Session (15) LO5 center of mass.pdf",
                "semester one/LO5/Session (16) LO5 Torque.pdf",
                "semester one/LO5/Session (17) LO5 Simple machines.pdf",
                "semester one/LO5/Session (18) LO5 NewtonGÃ‡Ã–s Second Law of rotational motion.pdf"
            ],
            LO6: [
                "semester one/LO6/LO. 6 _ 7  Elasticity _ Hook_s Law Questions _ answers - Copy.pdf",
                "semester one/LO6/Session (19)  LO6 - Young_s Modulus of Elasticity.pdf"
            ],
            LO7: [
                "semester one/LO7/LO. 6 _ 7  Elasticity _ Hook_s Law Questions _ answers.pdf",
                "semester one/LO7/Session (20) LO7 - Hooke_s Law.pdf"
            ],
            references: [
                "semester one/additional refrence/8.01-Physics for Scientists and Engineers with Modern Physics-Serway,Jewett.pdf",
                "semester one/additional refrence/book Giancoli_Physics_7th_edition.pdf",
                "semester one/additional refrence/Halliday-Resnick-Walker - Fundamentals of Physics - 10th Edition.pdf",
                "semester one/additional refrence/Physics Book.pdf",
                "semester one/additional refrence/Serway Vuille College Physics.pdf"
            ]
        };

        // Test banks folder files
        resourceFiles.testBanks = [
            "semester one/test banks/8.01-Physics for Scientists and Engineers with Modern Physics-Serway,Jewett.pdf",
            "semester one/test banks/book Giancoli_Physics_7th_edition.pdf",
            "semester one/test banks/CENTER OF MASS.pdf",
            "semester one/test banks/Chapter 1 MEASUREMENT.pdf",
            "semester one/test banks/EQUILIBRIUM AND ELASTICITY.pdf",
            "semester one/test banks/FORCE AND MOTION (Haliday TB).pdf",
            "semester one/test banks/GRAVITATION Questions.pdf",
            "semester one/test banks/Halliday-Resnick-Walker - Fundamentals of Physics - 10th Edition.pdf",
            "semester one/test banks/Serway Vuille College Physics.pdf",
            "semester one/test banks/TORQUE Haliday test bank.pdf",
            "semester one/test banks/Mid exam G10 Semester 1.pdf",
            "semester one/test banks/Physics Lo2 G10 S1.pdf",
            "semester one/test banks/Physics Lo1 G10 S1.pdf",
            "semester one/test banks/Final exam 1.pdf",
            "semester one/test banks/Final exam 2.pdf",
            "semester one/test banks/Final exam 3.pdf",
            "semester one/test banks/Final exam 4.pdf",
            "semester one/test banks/Final exam 5.pdf"
        ];

        // Video links mapped to LO keys and concept titles
        const videoLinks = {
            LO1: {
                "Physics as experimental science": ["https://youtu.be/uXa3keakdWs?si=K-cP76rRtxekQO_V"],
                "Systems of measurements and standards": ["https://youtu.be/0KiBYgx-30U?si=UKyy0CdKVHd3XdVL"],
                "International system of units": ["https://youtu.be/8rZRYPoerPw?si=0tlb0sQyp5NXP9SB"],
                "Prefixes of metric units": ["https://youtu.be/0KiBYgx-30U?si=HvgrsKBwSXEfWojf"],
                "From Macro to Nanoscale": ["https://youtu.be/eK8gXP3pImU?si=3OwpeVuOd4wnVADx"],
                "Measurement errors": ["https://youtu.be/JbEo46uV6d4?si=xIh0Ickt6VfwtQ1J"],
                "Measurement accuracy vs. precision": ["https://youtu.be/0IiHPKAvo7g?si=e1tPaI2se1fhd650"],
                "Dimensional analysis": ["https://youtu.be/vWovdihteqs?si=9F2wJPICS0UjplLR"]
            },
            LO2: {
                "Forces": ["https://youtu.be/MaabUHLIIXA?si=3rZLqIQU1Duir7PO", "https://youtu.be/vZ0ehaOEZKE?si=K-8bSa3KBQwAlI0G"],
                "Static equilibrium": ["https://youtu.be/qGvFAl5CK_c?si=DAdCmvbwkjAF5Elp"],
                "Dynamic equilibrium": ["https://youtu.be/zaHM74k9Z1w?si=ho8oNaUK0YVI94jb"],
                "System of forces": ["https://youtu.be/E626-DiQgRs?si=9yBrjFEHiW-VmLJk"],
                "Newton's third law": ["https://youtu.be/TxhESW6YtOg?si=-2Ov-yTp5xW_7Gyf"],
                "Free body diagram": ["https://youtu.be/52R61aSWHg0?si=rWZvad6YGGlvYYQv"],
                "Action-Reaction Pairs": ["https://youtu.be/Hm7B-xXJ1uM?si=7aN1ru7DjUCMPAU2"],
                "Point particle": ["https://youtu.be/FyJTgG3a2hY?si=4U27PgSq65c3ATUc"]
            },
            LO3: {
                "Equilibrium vs. motion vs. change in motion": ["https://youtu.be/oNgo9bbDi7Q?si=NvxNr0OnOH0eV6cU"],
                "Force as a vector": ["https://youtu.be/EwSHKuSxX_8?si=58w15govolcKfVaE"],
                "Net force acting on a free body.": ["https://youtu.be/fwDWJZkrtUE?si=pohUiTYJyIipT9j9"],
                "Newton's Laws of Motion": ["https://youtu.be/g550H4e5FCY?si=7IQi9fXkHlcaMUGU"],
                "Centripetal acceleration": ["https://youtu.be/ZbLirQuT9uU?si=PZW2RRaLUpbPAvN3"],
                "Centripetal force": ["https://youtu.be/SQX22VVmRPs?si=QAM94hCZONFd2RWe"],
                "Inertial reference frame": ["https://youtu.be/8xiIP2B6L3M?si=Z6cdj6o9nRkQD3NN", "https://youtu.be/3yaZ7lkQPUQ?si=QH_d4qCXbZMht290"]
            },
            LO4: {
                "Mass": ["https://youtu.be/IuBoeDihLUc?si=3SXrfCI2W4X1hbhl"],
                "Gravity": ["https://youtu.be/Ep1jIhHdf2A?si=1Dft7uAyrzapeR3q"],
                "Gravitational field": ["https://youtu.be/8AUljAd_AyE?si=zlrXBiIpWOAKk64p"],
                "Weight": ["https://youtu.be/hIMYdNPIjZw?si=ZKJxSISQWTmwo4Ht"],
                "General Law of Gravitation": ["https://youtu.be/8CykJ3NgBQs?si=_AcV-o7BcBtRY30T"],
                "Newton's Second Law in gravitational field": ["https://youtu.be/PIpnGilqefE?si=MsCXWCg9bCAw0Az7"],
                "Free Fall": ["https://youtu.be/BVgemK1Y2wA?si=BI2c4O9p0rf_APhS", "https://youtu.be/wf8SYTb4r-g?si=bkmGitJMuuoGJaLN"],
                "Apparent weight": ["https://youtu.be/tVsYgAM8MV4?si=AIF75ZNaR4mQwcRl"]
            },
            LO5: {
                "Center of mass": ["https://youtu.be/SWu_i-19Rn0?si=MjRQ4VOkt9zgeEPJ"],
                "Torque": ["https://youtu.be/jg4e8W44_E4?si=diORRPAPNAi8F1bK"],
                "Static equilibrium": ["https://youtu.be/qGvFAl5CK_c?si=CQ-y5ZvrIoyTS9LR"],
                "Translational vs. Rotational Equilibrium": ["https://youtu.be/XmXXnSWf3fM?si=sGgH-ImG8bj9YRZd"],
                "The equilibrium torque condition: rotational analogue of Newton's Laws": ["https://youtu.be/xusMSv2z77s?si=lxMyAIeKYSXt51z-"],
                "Simple machines": ["https://youtu.be/dvEVYrSUYJM?si=6RZCTRRpX_g45zzH"],
                "The mechanical advantage of simple machines": ["https://youtu.be/SPTNKnCqlW4?si=CaG23FY5ZxG_SajX"],
                "Stability of extended rigid bodies depends on the sum of the forces, the sum of the torques and on the location of the center of mass.": ["https://youtu.be/jQDEOwrR4UU?si=I3zwQ8hO8egkJtwD"]
            },
            LO6: {
                "Elasticity & Hooke's Law": ["https://youtu.be/HALbtyDUjp0?si=MkinEWmQizsPuUf8"],
                "Range of validity for Hooke's Law": ["https://youtu.be/HALbtyDUjp0?si=MkinEWmQizsPuUf8"],
                "Stress and strain": ["https://youtu.be/Ncode2Fsqq0?si=8RRgPd3QZmIuF_7X", "https://youtu.be/c6ndD5kTkP4?si=e_0LhmM224aJbZ8i"],
                "Young's modulus": ["https://youtu.be/jr_UPRZV8hQ?si=_f3I82CssCsue2_6", "https://youtu.be/DLE-ieOVFjI?si=UnR_2mcYnVIlHVs4"]
            },
            LO7: {
                "Hooke's Law & Linear Springs": ["https://youtu.be/ZzwuHS9ldbY?si=VmhfRfTUKf1xZm8s"],
                "The spring constant": ["https://youtu.be/BnqKCCFKG0M?si=vTBiPoT5HGy83TpQ"],
                "Yield point": ["https://youtu.be/jtAj0s203CI?si=O4nZDwHG_wYMRVVl", "https://youtu.be/b_cAxh44aNQ?si=Idk8Xq4Veh3pcrF2"],
                "Tension and compression": ["https://youtu.be/F5oqJ5t-pa4?si=60CL12R5CD1RYPPI", "https://youtu.be/WP8PT075VAk?si=_Ufj0TvHWW1Dcs5i"]
            }
        };

        const loSummaryVideos = {
            LO1: [
                "https://youtu.be/uXa3keakdWs?si=GsW0ld517POGIcom",
                "https://youtu.be/9qEKGSi4inI?si=yn5VkQzEaBKA36Gk"
            ],
            LO2: [
                "https://youtu.be/myRI9aen9qg?si=Ve1ZNWsDDX61T8ML",
                "https://youtu.be/H-hCJUviOyI?si=zc2D-4Ad6gSesgcF"
            ],
            LO3: [
                "https://youtu.be/kgZRM2tcFeU?si=EBFGNXMpg83S8Hgx",
                "https://youtu.be/x_auV0DFIJ0?si=ZeF07_5K0GMA82eX"
            ],
            LO4: ["https://youtu.be/f-xAQezHLEY?si=KI33rpN998P0SmI_"],
            LO5: [
                "https://youtu.be/aGaEXZTLqRY?si=O-cARovOqA7fFVao",
                "https://youtu.be/Pb3mWMOkHSQ?si=xDM74HEK_bg-8pC_"
            ],
            LO6: ["https://youtu.be/aGaEXZTLqRY?si=8P9atW9cwF8HGLuw"],
            LO7: ["https://youtu.be/aGaEXZTLqRY?si=lmfnsLPO_NDs-Fk0"]
        };

        const revisionVideos = {
            midterm: ["https://youtu.be/vuF59fFqHcc?si=nPpxmM8CCL3Mv08X"]
        };

        // Mapping of filename -> Google Drive share URL (generated from CSV)
        const shareMap = {
            "Mid exam G10 Semester 1.pdf": "https://drive.google.com/file/d/1OUAg_oa_sFFo1U-VbFh3qoew6wH52ULk/view?usp=drivesdk",
            "Physics Lo2 G10 S1.pdf": "https://drive.google.com/file/d/1dA-NvI1AYBNId7hGCb3sGjdmdgeO3-lY/view?usp=drivesdk",
            "Physics Lo1 G10 S1.pdf": "https://drive.google.com/file/d/1BAYJgmWEBa_Ew4jWcPzMwmvYSLIk94eD/view?usp=drivesdk",
            "Final exam 5.pdf": "https://drive.google.com/file/d/1zhrFk7hgI8tFc5APJ5YsiurEg6sjhHQ3/view?usp=drivesdk",
            "Final exam 4.pdf": "https://drive.google.com/file/d/1vtQBaqG4m4lT3C5SwW3rh-RmefcKYQzk/view?usp=drivesdk",
            "Final exam 3.pdf": "https://drive.google.com/file/d/1eCKwvuw3aaqJNK5OsBIuJz5GqLNhrfFN/view?usp=drivesdk",
            "Final exam 2.pdf": "https://drive.google.com/file/d/1Rbt5N2npv1PUnidkYrm9T-s_bcJH7jyr/view?usp=drivesdk",
            "Final exam 1.pdf": "https://drive.google.com/file/d/1_bn-VD7X9nUBw3q_s7LRfCdOZmD1Yevf/view?usp=drivesdk",
            "TORQUE Haliday test bank.pdf": "https://drive.google.com/file/d/1mUum66jFQXkJUpdsPj4pCrjJIE4olQLW/view?usp=drivesdk",
            "EQUILIBRIUM AND ELASTICITY.pdf": "https://drive.google.com/file/d/1_tQv-IOWRJfQ-hGT8aLHgkmcTtUo4Vhh/view?usp=drivesdk",
            "CENTER OF MASS.pdf": "https://drive.google.com/file/d/1WssoxuYGCYWFKVwnyyzW4k_LUYMGDdQk/view?usp=drivesdk",
            "GRAVITATION Questions.pdf": "https://drive.google.com/file/d/1t5Mk5PF4oAI3752kRC4yFzIVriYg2Nho/view?usp=drivesdk",
            "FORCE AND MOTION (Haliday TB).pdf": "https://drive.google.com/file/d/10x8VP435JN-N2pnumgSBE5UE1JixEVEb/view?usp=drivesdk",
            "Chapter 1 MEASUREMENT.pdf": "https://drive.google.com/file/d/1pe0ZnJBWL__2FqyVruEc1iwgoiH0G_wH/view?usp=drivesdk",
            "Serway Vuille College Physics.pdf": "https://drive.google.com/file/d/1FyINU6ToPmQcvDL_He8PzxUCmA-3wjy-/view?usp=drivesdk",
            "Halliday-Resnick-Walker - Fundamentals of Physics - 10th Edition.pdf": "https://drive.google.com/file/d/1O3uzNA59iqvbYW7yyY-B1In5JPRyRq5J/view?usp=drivesdk",
            "book Giancoli_Physics_7th_edition.pdf": "https://drive.google.com/file/d/19xDIN_RCsq7VDgCA9tiStRrEnDRLdsd5/view?usp=drivesdk",
            "8.01-Physics for Scientists and Engineers with Modern Physics-Serway,Jewett.pdf": "https://drive.google.com/file/d/1-dO3IRT1E6Njv3mvy-UO6nblMBA_zVUN/view?usp=drivesdk",
            "LO. 3 Circular motion Answers.pdf": "https://drive.google.com/file/d/1SnmlhdIolXjj10VZyABRHH-0Q-O8KSrz/view?usp=drivesdk",
            "LO3 Session (12)  CIRCULAR MOTION.pdf": "https://drive.google.com/file/d/1z1imvO8pLstiKgDVv8JurmDpcr1ZeslW/view?usp=drivesdk",
            "LO3 Session (09)  NewtonGÃ‡Ã–s Laws.pdf": "https://drive.google.com/file/d/159CgIwB3JJmaJKzrQPgvY8epPV4UW1is/view?usp=drivesdk",
            "LO3 Session (10)  Net force.pdf": "https://drive.google.com/file/d/1g8w7eb3_-HzNp-bbDaY_ckXv-qsoaDVk/view?usp=drivesdk",
            "LO3 Session (11) Net Force (Part 2).pdf": "https://drive.google.com/file/d/1qWR-kkMAopEkEUg_OLJJj4aW9w6t5OT9/view?usp=drivesdk",
            "LO2 Session 07 Forces.pdf": "https://drive.google.com/file/d/1nOt5ZpmosnaY62d7FSEdVPJOOcSo1rqN/view?usp=drivesdk",
            "LO2 Session 08 Newton's 3rd law.pdf": "https://drive.google.com/file/d/12-fX54HhK9rxLeYz60lc82X3YNqH0xOg/view?usp=drivesdk",
            "Newton_s 3rd law  LO. 2 - Answers.pdf": "https://drive.google.com/file/d/1IO5Emg0PmzULb1KrexWN2EntbUbrOqSl/view?usp=drivesdk",
            "LO1 Session (01) systems of measurement.pdf": "https://drive.google.com/file/d/11g530gLxkTqnHon0MatCBdcleibhWVbu/view?usp=drivesdk",
            "LO1 Session (02) Unit Conversion.pdf": "https://drive.google.com/file/d/1dxTHb6pRCrSrt6CeX8-ebSTGyA2TB0nf/view?usp=drivesdk",
            "LO1 Session (03)  Measurement Errors.pdf": "https://drive.google.com/file/d/1iDt417HQF9nRWwePt_w-jg5QxA6Nk-AZ/view?usp=drivesdk",
            "LO1 Session (04)  Dimensional analysis.pdf": "https://drive.google.com/file/d/1TJFQjUonwXufE6D0tFDK7jFcyxZp8Vha/view?usp=drivesdk",
            "Solutions of measurement problems  LO. 1.pdf": "https://drive.google.com/file/d/1TB5aR8Zv-K5XUC5di6rfvo8x6W8y3EtH/view?usp=drivesdk",
            "LO. 6 _ 7  Elasticity _ Hook_s Law Questions _ answers.pdf": "https://drive.google.com/file/d/1biVMffSdOZc3c5ERxtUjfyCvOCaCgOQY/view?usp=drivesdk",
            "Session (20) LO7 - Hooke_s Law.pdf": "https://drive.google.com/file/d/1TaijdYuCHWLAnYpUKjLOS9DA9pOf-kTc/view?usp=drivesdk",
            "Session (18) LO5 NewtonGÃ‡Ã–s Second Law of rotational motion.pdf": "https://drive.google.com/file/d/1JX0kZ-UHgqjA_JRdmZSMOcro8i1p2vjE/view?usp=drivesdk",
            "Session (17) LO5 Simple machines.pdf": "https://drive.google.com/file/d/1EzsD-AH51mdVdt4o6Lt_ATBb3_m5uAWo/view?usp=drivesdk",
            "Session (16) LO5 Torque.pdf": "https://drive.google.com/file/d/1IRnAQkPP8SAAV6qdb77jIR_sLlPOH3Mf/view?usp=drivesdk",
            "Session (15) LO5 center of mass.pdf": "https://drive.google.com/file/d/1TFoYFfAY9c0HCAOt95Wjf66moHvvHXzh/view?usp=drivesdk",
            "LO. 3 Newton_s 1st _ 2nd law - Questions and answers.pdf": "https://drive.google.com/file/d/1jOmcelXYQABvVOMzzTJHbuCWq06SVL6Z/view?usp=drivesdk",
            "LO. 4 Newton_s Universal law of gravitation answers.pdf": "https://drive.google.com/file/d/1Z3tJ2BQrNFyY1Q86Pw_omRDiszICkroS/view?usp=drivesdk",
            "LO4 Session (13)  NewtonGÃ‡Ã–s Law of Universal Gravitation.pdf": "https://drive.google.com/file/d/1iMlXsANNOWZIOZYIYSmkZ4ye2iu5yzH-/view?usp=drivesdk",
            "LO4 Session (14)  Apparent weight &  Free fall.pdf": "https://drive.google.com/file/d/1tJAndQzYDkSaEOJQlMaovj0dTsCjOi0G/view?usp=drivesdk",
            "LO. 6 _ 7  Elasticity _ Hook_s Law Questions _ answers - Copy.pdf": "https://drive.google.com/file/d/1rmqYWRrP6e_F0k6zfHWscUXiEUZynHD4/view?usp=drivesdk",
            "Session (19)  LO6 - Young_s Modulus of Elasticity.pdf": "https://drive.google.com/file/d/1a0Ik-iD8vhhqHaEkAQPdh1tIXhS53KNW/view?usp=drivesdk",
            "Physics Book.pdf": "https://drive.google.com/file/d/1tItFkFjA3XSJVxb81f54cxW37EOJjaUC/view?usp=drivesdk"
        };

        // Render video links for a given LO/concept
        function renderVideoLinks(loKey, conceptTitle) {
            const lo = videoLinks[loKey] || {};
            const links = lo[conceptTitle] || [];
            if (!links.length) return '';
            let html = `<div class="mt-3 p-3 bg-tech-dark-alt rounded-lg border border-tech-dark-alt">
                            <h4 class="text-md font-bold text-tech-secondary mb-1">Videos</h4>`;
            links.forEach((url, idx) => {
                html += `
                    <div class="mb-2">
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary hover:text-tech-secondary transition duration-200 text-sm underline font-semibold">Video ${idx + 1}</a>
                    </div>
                `;
            });
            html += `</div>`;
            return html;
        }

        // Render Test Banks section
        function renderTestBanks() {
            const files = resourceFiles.testBanks || [];
            let html = `
                <h2 class="text-3xl font-extrabold mb-6 text-tech-primary border-b border-tech-secondary/50 pb-2">Test Banks</h2>
                <div class="p-6 bg-tech-dark-alt rounded-xl border border-tech-secondary/50 shadow-subtle-glow">
                    <p class="text-xl font-medium text-tech-light mb-6">Download test banks to practice and evaluate your understanding.</p>
            `;
            files.forEach(f => {
                const name = f.split('/').pop();
                const url = shareMap[name] || f;
                html += `
                    <div class="mb-4">
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-secondary hover:text-tech-primary transition duration-200 text-lg underline font-semibold">${name}</a>
                    </div>
                `;
            });
            html += `</div>`;
            return html;
        }

        // Render file list for a given LO key
        function renderFilesList(loKey) {
            const files = resourceFiles[loKey] || [];
            if (!files.length) return '';
            let html = `<div class="mt-3 p-3 bg-tech-dark-alt rounded-lg border border-tech-dark-alt">
                            <h4 class="text-md font-bold text-tech-secondary mb-1">Files & Presentations</h4>`;
            files.forEach(f => {
                const name = f.split('/').pop();
                const url = shareMap[name] || f;
                html += `
                    <div class="mb-2">
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary hover:text-tech-secondary transition duration-200 text-sm underline font-semibold">${name}</a>
                    </div>
                `;
            });
            html += `</div>`;
            return html;
        }

        // Function to create a single downloadable link block
        function createLinkBlock(title, placeholderText) {
            // Show placeholder text (no fake downloads)
            return `
                <div class="mt-3 p-3 bg-tech-dark-alt rounded-lg border border-tech-dark-alt">
                    <h4 class="text-md font-bold text-tech-secondary mb-1">${title}</h4>
                    <p class="text-sm text-tech-light/70 italic mb-2">${placeholderText}</p>
                </div>
            `;
        }


        // Function to render the expandable concept content
        function renderConcept(loKey, conceptTitle) {
            // Placeholder text for description (can be replaced with actual content later)
            const description = `This section covers the fundamental principles of **${conceptTitle}**. Understanding this concept is crucial for solving problems related to classical mechanics. It often involves analysis of vectors and their components.`;

            return `
                <details class="mb-4 bg-tech-dark-alt rounded-xl border border-tech-primary/30 shadow-lg overflow-hidden">
                    <summary class="flex items-center justify-between p-4 cursor-pointer text-lg font-semibold text-tech-light hover:bg-tech-primary/20 transition duration-300">
                        <span class="truncate">${conceptTitle}</span>
                        <svg class="w-5 h-5 ml-2 transition-transform duration-300 arrow-icon flex-shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                    </summary>
                    <div class="px-4 pb-4 pt-2 border-t border-tech-primary/30 space-y-4">
                        <!-- Description -->
                        <div class="bg-tech-dark-alt p-3 rounded-lg border border-tech-dark-alt">
                            <h4 class="text-md font-bold text-tech-secondary mb-1">Concept Description</h4>
                            <p class="text-tech-light/90 text-sm">${description}</p>
                        </div>

                        <!-- Video links for this concept -->
                        ${renderVideoLinks(loKey, conceptTitle)}
                    </div>
                </details>
            `;
        }

        /**
         * Main function to handle content rendering (called by click and by Firestore snapshot).
         * @param {string} loKey - The key of the Learning Objective.
         * @param {boolean} isProgressUpdate - If true, skips scrolling the content area to the top.
         */
        function renderContent(loKey, isProgressUpdate = false) {
            const contentArea = document.getElementById('dynamic-content');
            const defaultMessage = document.getElementById('default-message');

            // Hide default message
            if (defaultMessage) {
                defaultMessage.style.display = 'none';
            }

            // Render Content
            if (loKey === 'revisions') {
                contentArea.innerHTML = renderRevisions();
            } else if (loKey === 'test-banks') {
                contentArea.innerHTML = renderTestBanks();
            } else if (learningObjectives[loKey]) {
                contentArea.innerHTML = renderLO(loKey, learningObjectives[loKey]);
            } else {
                contentArea.innerHTML = `<h2 class="text-red-400">Error: LO not found.</h2>`;
            }

            // Scroll content area to the top, but only if the action was a user-initiated navigation 
            if (!isProgressUpdate) {
                document.getElementById('content-area').scrollTop = 0;
            }
        }

        // Function to render a selected LO
        function renderLO(loKey, loData) {
            let html = `
                <h2 class="text-3xl font-extrabold mb-6 text-tech-primary border-b border-tech-secondary/50 pb-2">${loData.title}</h2>
            `;

            // 1. LO summarized video(s)
            if (loSummaryVideos[loKey]) {
                html += `
                    <div class="mb-6 p-4 bg-tech-dark-alt/80 rounded-lg border border-tech-primary/30">
                        <h3 class="text-xl font-bold text-tech-secondary mb-3">Summary Videos</h3>
                        <div class="space-y-2">
                `;
                loSummaryVideos[loKey].forEach((vid, idx) => {
                    html += `
                        <a href="${vid}" target="_blank" class="flex items-center space-x-2 text-tech-light hover:text-tech-primary transition">
                            <svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                            <span class="underline">Watch Summary Video ${idx + 1}</span>
                        </a>
                     `;
                });
                html += `</div></div>`;
            }

            // Render all concepts
            loData.concepts.forEach(concept => {
                html += renderConcept(loKey, concept);
            });

            // 2. Files / Presentations
            // Render files list once per LO
            html += renderFilesList(loKey);

            // 3. Test Banks Link
            html += `
                <div class="mt-8 p-4 bg-tech-dark-alt rounded-lg border border-tech-dark-alt">
                    <p class="text-tech-light/80 mb-3">Looking for practice tests? Check the Test Banks section.</p>
                    <button onclick="handleNavigationClick('test-banks')" class="px-3 py-2 bg-tech-primary text-tech-bg rounded-md font-semibold hover:bg-tech-secondary transition duration-200">Open Test Banks</button>
                </div>
            `;

            return html;
        }

        // Function to render revisions list
        function renderRevisions() {
            let html = `
                <h2 class="text-3xl font-extrabold mb-6 text-tech-primary border-b border-tech-secondary/50 pb-2">Revisions & References</h2>
            `;

            // Helper for video sections
            const renderVidSection = (title, vids) => {
                if (!vids || !vids.length) return '';
                let block = `
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold text-tech-light mb-4">${title}</h3>
                        <div class="grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
                `;
                vids.forEach((v, idx) => {
                    block += `
                        <a href="${v}" target="_blank" class="block p-4 bg-tech-dark-alt rounded-lg border border-tech-primary/30 hover:border-tech-secondary hover:shadow-subtle-glow transition group">
                            <div class="flex items-center space-x-3">
                                <svg class="w-8 h-8 text-red-500 group-hover:text-red-400 transition" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                                </svg>
                                <span class="font-semibold text-tech-light group-hover:text-tech-primary">Watch Video ${idx + 1}</span>
                            </div>
                        </a>
                    `;
                });
                block += `</div></div>`;
                return block;
            }

            // Midterm Revision Videos
            if (revisionVideos && revisionVideos.midterm) {
                html += renderVidSection('Midterm Revision', revisionVideos.midterm);
            }

            // Reference Files (Books)
            html += `
                <div class="mt-8">
                    <h3 class="text-2xl font-bold text-tech-light mb-4">Reference Books</h3>
                    <div class="p-6 bg-tech-dark-alt rounded-xl border border-tech-secondary/50 shadow-subtle-glow">
                        <p class="text-xl font-medium text-tech-light mb-6">
                            Download these files if you want to study deeper in references:
                        </p>
            `;
            const refs = resourceFiles.references || [];
            refs.forEach((f) => {
                const name = f.split('/').pop();
                const url = shareMap[name] || f;
                html += `
                    <div class="mb-4">
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-secondary hover:text-tech-primary transition duration-200 text-lg underline font-semibold">${name}</a>
                    </div>
                `;
            });
            html += `</div></div>`;

            return html;
        }

        // Progress tracking removed


        // Function to handle navigation click and update sidebar state
        function handleNavigationClick(loKey) {
            const loItems = document.querySelectorAll('.lo-item');

            // 1. Update Active State in Sidebar
            loItems.forEach(item => item.classList.remove('active'));
            document.getElementById(`lo-${loKey}`).classList.add('active');

            // Render Content (which handles scrolling)
            renderContent(loKey);
        }

        // DOM Content Loaded: Initialize Navigation Bar
        document.addEventListener('DOMContentLoaded', () => {
            const loList = document.getElementById('lo-list');

            // Loop through all defined LOs to create sidebar buttons
            // Loop through all defined LOs to create sidebar buttons
            Object.keys(learningObjectives).forEach(key => {
                const displayText = learningObjectives[key].title;

                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <button id="lo-${key}" 
                        class="lo-item w-full flex justify-between items-center text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 
                                hover:bg-tech-primary/10 hover:border-tech-primary font-medium text-sm sm:text-base"
                        data-lo-key="${key}">
                        <span class="truncate">${displayText}</span>
                    </button>
                `;
                loList.appendChild(listItem);
            });

            // Add Revisions Button
            const revItem = document.createElement('li');
            revItem.innerHTML = `
                <button id="lo-revisions" 
                    class="lo-item w-full flex justify-between items-center text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 
                            hover:bg-tech-primary/10 hover:border-tech-primary font-medium text-sm sm:text-base"
                    data-lo-key="revisions">
                    <span class="truncate">Revisions</span>
                </button>
            `;
            loList.appendChild(revItem);

            // Add Test Banks button to the sidebar
            const tbItem = document.createElement('li');
            tbItem.innerHTML = `
                <button id="lo-test-banks" 
                    class="lo-item w-full flex justify-between items-center text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 
                            hover:bg-tech-primary/10 hover:border-tech-primary font-medium text-sm sm:text-base"
                    data-lo-key="test-banks">
                    <span class="truncate">Test Banks</span>
                </button>
            `;
            loList.appendChild(tbItem);

            // Attach event listener to the list container (delegation)
            loList.addEventListener('click', (event) => {
                const button = event.target.closest('.lo-item');
                if (button) {
                    const loKey = button.getAttribute('data-lo-key');
                    handleNavigationClick(loKey);
                }
            });

            // Initialize first render
            renderContent('LO1');

            // Theme toggle initialization for this page
            // Theme toggle initialization for this page
            const themeToggleIcon = document.getElementById('theme-toggle-icon');

            function setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);

                // update icon if present
                if (themeToggleIcon) {
                    if (theme === 'dark') {
                        themeToggleIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
                    } else {
                        // Light/Christmas/Midnight - use generic or specific icons if needed
                        // For now, keeping the "sun" icon for non-dark themes or simplified logic
                        themeToggleIcon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
                    }
                }

                // Use centralized effects
                if (window.ThemeEffects) {
                    window.ThemeEffects.setEffect(theme);
                } else {
                    if (theme === 'christmas') {
                        startSnow();
                    } else {
                        stopSnow();
                    }
                }
            }

            // Default to dark unless user has saved preference
            // Christmas / Language Logic
            const translations = {
                en: { "settings": "Settings", "language": "Language", "theme": "Theme", "close": "Close", "footer_contact": "If you have any comments please text me" },
                ar: { "settings": "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", "language": "Ø§Ù„Ù„ØºØ©", "theme": "Ø§Ù„Ø³Ù…Ø©", "close": "Ø¥ØºÙ„Ø§Ù‚", "footer_contact": "Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø³Ù„ØªÙŠ" }
            };
            function updateText(lang) {
                const t = translations[lang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (t[key]) el.textContent = t[key];
                });
            }
            function setLanguage(lang) {
                document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
                document.documentElement.setAttribute('lang', lang);
                localStorage.setItem('language', lang);
                updateText(lang);
            }

            // Snow helper functions (fallback)
            function startSnow() {
                const c = document.getElementById('snow-container'); if (!c) return; stopSnow();
                window.snowInterval = setInterval(() => {
                    const s = document.createElement('div');
                    s.className = 'snowflake';
                    s.style.left = Math.random() * 100 + 'vw';
                    s.style.width = s.style.height = (Math.random() * 5 + 3) + 'px';
                    s.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    s.style.opacity = Math.random();
                    c.appendChild(s);
                    setTimeout(() => s.remove(), 5000);
                }, 100);
            }
            function stopSnow() { if (window.snowInterval) clearInterval(window.snowInterval); const c = document.getElementById('snow-container'); if (c) c.innerHTML = ''; }

            // Init
            setLanguage(localStorage.getItem('language') || 'en');
            const saved = localStorage.getItem('theme');
            if (saved) setTheme(saved); else setTheme('dark');

            // Listeners
            document.getElementById('open-settings')?.addEventListener('click', (e) => { e.preventDefault(); document.getElementById('settings-modal').classList.remove('hidden'); });
            document.getElementById('close-settings')?.addEventListener('click', () => document.getElementById('settings-modal').classList.add('hidden'));
            document.getElementById('settings-modal')?.addEventListener('click', (e) => { if (e.target === document.getElementById('settings-modal')) document.getElementById('settings-modal').classList.add('hidden'); });
            document.getElementById('lang-en')?.addEventListener('click', () => setLanguage('en'));
            document.getElementById('lang-ar')?.addEventListener('click', () => setLanguage('ar'));
            document.getElementById('theme-dark')?.addEventListener('click', () => setTheme('dark'));
            document.getElementById('theme-midnight')?.addEventListener('click', () => setTheme('midnight'));
            document.getElementById('theme-christmas')?.addEventListener('click', () => setTheme('christmas'));
            document.getElementById('theme-space')?.addEventListener('click', () => setTheme('space'));

            // Legacy
            const legacyToggle = document.getElementById('theme-toggle');
            if (legacyToggle) legacyToggle.addEventListener('click', () => { setTheme(document.documentElement.getAttribute('data-theme') === 'dark' ? 'christmas' : 'dark'); });

        });
    </script>
    <script src="../space-theme.js"></script>
</body>

</html>