<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemestry Checkpoints</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- Firebase auth scripts removed to simplify header (no login/account UI) -->


    <style>
        /* Apply Inter font family and smooth scrolling */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        /* --- Tech Aesthetic Colors and Glows --- */
        .shadow-subtle-glow {
            box-shadow: 0 4px 15px rgba(51, 255, 204, 0.25), 0 0 5px rgba(51, 255, 204, 0.1);
            transition: all 0.3s ease-in-out;
        }

        .hover\:shadow-subtle-glow-lg:hover {
            box-shadow: 0 6px 20px rgba(51, 255, 204, 0.4), 0 0 8px rgba(51, 255, 204, 0.2);
        }

        /* Keyframes for continuous gradient shift */
        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Base class for the animated text effect */
        .gradient-text-wrapper {
            display: inline-block;
            background-size: 300% 100%;
            animation: gradient-shift 8s linear infinite;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            line-height: 1.2;
            white-space: nowrap;
        }

        /* Style for the main header (Chemestry) */
        .gradient-h1 {
            background-image: linear-gradient(to right, #00BFFF, #33FFCC, #00BFFF, #33FFCC);
            animation-duration: 8s;
        }

        /* Light theme variables */
        :root[data-theme="light"] {
            --tech-bg: #ffffff;
            --tech-dark-alt: #f3f4f6;
            --tech-light: #111827;
            --tech-primary: #0369a1;
            --tech-secondary: #0e7490;
            --border-color: rgba(2, 132, 199, 0.3);
        }

        /* Dark theme variables (default) */
        :root[data-theme="dark"] {
            --tech-bg: #1A1F26;
            --tech-dark-alt: #2C333F;
            --tech-light: #E0E6F0;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(51, 255, 204, 0.3);
        }

        /* Space Theme Variables */
        :root[data-theme="space"] {
            --tech-bg: #050505;
            --tech-dark-alt: #0F1218;
            --tech-light: #ffffff;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(0, 191, 255, 0.3);
        }

        /* Midnight Synth Theme */
        :root[data-theme="midnight"] {
            --tech-bg: #1e1b4b;
            --tech-dark-alt: #312e81;
            --tech-light: #e0e7ff;
            --tech-primary: #f472b6;
            --tech-secondary: #818cf8;
            --border-color: rgba(244, 114, 182, 0.4);
        }

        /* Christmas Theme */
        :root[data-theme="christmas"] {
            --tech-bg: #2C0412;
            --tech-dark-alt: #460B1C;
            --tech-light: #FEEBC8;
            --tech-primary: #D4AF37;
            --tech-secondary: #228B22;
            --border-color: rgba(212, 175, 55, 0.4);
        }

        body {
            background-color: var(--tech-bg);
            color: var(--tech-light);
        }

        .bg-tech-bg {
            background-color: var(--tech-bg) !important;
        }

        .bg-tech-dark-alt {
            background-color: var(--tech-dark-alt) !important;
        }

        .text-tech-light {
            color: var(--tech-light) !important;
        }

        .text-tech-primary {
            color: var(--tech-primary) !important;
        }

        .text-tech-secondary {
            color: var(--tech-secondary) !important;
        }

        /* Custom scrollbar style for the content area */
        #content-area {
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #00BFFF #1A1F26;
        }

        #content-area::-webkit-scrollbar {
            width: 8px;
        }

        #content-area::-webkit-scrollbar-thumb {
            background-color: #00BFFF;
            border-radius: 4px;
        }

        #content-area::-webkit-scrollbar-track {
            background-color: #1A1F26;
        }

        /* Custom style for the LO button when active */
        .lo-item.active {
            background-color: #00BFFF33;
            /* tech-primary with opacity */
            border-left-color: #33FFCC;
            /* tech-secondary */
            box-shadow: 0 0 10px rgba(51, 255, 204, 0.3);
        }

        /* Details summary arrow rotation */
        details[open] summary .arrow-icon {
            transform: rotate(90deg);
        }

        /* Theme toggle button */
        .theme-toggle {
            padding: 0.5rem;
            border-radius: 9999px;
            transition: all 0.3s ease;
            color: var(--tech-light);
        }

        .theme-toggle:hover {
            background-color: var(--tech-primary);
            color: var(--tech-bg);
        }

        /* Enforce CSS Variables */
        .bg-tech-bg {
            background-color: var(--tech-bg) !important;
        }

        .bg-tech-dark-alt {
            background-color: var(--tech-dark-alt) !important;
        }

        .text-tech-light {
            color: var(--tech-light) !important;
        }

        .text-tech-primary {
            color: var(--tech-primary) !important;
        }

        .text-tech-secondary {
            color: var(--tech-secondary) !important;
        }

        .border-tech-primary {
            border-color: var(--tech-primary) !important;
        }

        .border-tech-secondary {
            border-color: var(--tech-secondary) !important;
        }

        /* Christmas Theme */
        :root[data-theme="christmas"] {
            --tech-bg: #2C0412;
            --tech-dark-alt: #460B1C;
            --tech-light: #FDF5E6;
            --tech-primary: #FFD700;
            --tech-secondary: #006400;
            --border-color: rgba(255, 215, 0, 0.4);
        }

        /* Snow */
        #snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            display: none;
        }

        :root[data-theme="christmas"] #snow-container {
            display: block;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(110vh);
            }
        }

        /* RTL */
        [dir="rtl"] {
            font-family: 'Tajawal', 'Inter', sans-serif;
        }

        [dir="rtl"] .text-right-rtl {
            text-align: right;
        }

        [dir="rtl"] #sidebar {
            border-left: 1px solid var(--tech-primary);
            border-right: none;
            margin-left: 1.5rem;
            margin-right: 0;
        }

        #settings-modal {
            backdrop-filter: blur(5px);
        }

        /* --- Dark Neon Dynamic Background --- */
        .cyber-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
            display: none;
        }

        /* Only show in Dark Theme */
        :root[data-theme="dark"] .cyber-wrapper {
            display: block;
        }

        .cyber-grid {
            position: absolute;
            width: 200vw;
            height: 200vh;
            top: -50%;
            left: -50%;
            background-image:
                linear-gradient(rgba(0, 191, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 191, 255, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
            transform: perspective(500px) rotateX(60deg);
            animation: grid-move 20s linear infinite;
        }

        @keyframes grid-move {
            0% {
                transform: perspective(500px) rotateX(60deg) translateY(0);
            }

            100% {
                transform: perspective(500px) rotateX(60deg) translateY(60px);
            }
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: float-orb 20s infinite ease-in-out;
        }

        .orb-1 {
            top: 20%;
            left: 20%;
            width: 300px;
            height: 300px;
            background: rgba(0, 191, 255, 0.3);
            animation-duration: 25s;
        }

        .orb-2 {
            bottom: 20%;
            right: 20%;
            width: 400px;
            height: 400px;
            background: rgba(51, 255, 204, 0.2);
            animation-duration: 30s;
            animation-delay: -5s;
        }

        .orb-3 {
            top: 50%;
            left: 50%;
            width: 200px;
            height: 200px;
            background: rgba(138, 43, 226, 0.15);
            animation-duration: 20s;
            animation-delay: -10s;
        }

        @keyframes float-orb {

            0%,
            100% {
                transform: translate(0, 0);
            }

            33% {
                transform: translate(40px, -60px);
            }

            66% {
                transform: translate(-30px, 30px);
            }
        }

        /* Breathing Glow for Cards in Dark Mode */
        :root[data-theme="dark"] .subject-card,
        :root[data-theme="dark"] .comp-card,
        :root[data-theme="dark"] .lo-item,
        :root[data-theme="dark"] details {
            animation: breathing-glow 5s ease-in-out infinite;
        }

        :root[data-theme="dark"] .subject-card:hover,
        :root[data-theme="dark"] .comp-card:hover,
        :root[data-theme="dark"] .lo-item:hover,
        :root[data-theme="dark"] details[open] {
            animation: none;
        }

        @keyframes breathing-glow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(0, 191, 255, 0.05);
                border-color: rgba(0, 191, 255, 0.1);
            }

            50% {
                box-shadow: 0 0 15px rgba(51, 255, 204, 0.15);
                border-color: rgba(51, 255, 204, 0.3);
            }
        }

        /* Space Theme Variables */
        :root[data-theme="space"] {
            --tech-bg: #050505;
            --tech-dark-alt: #0F1218;
            --tech-light: #ffffff;
            --tech-primary: #00BFFF;
            --tech-secondary: #33FFCC;
            --border-color: rgba(0, 191, 255, 0.3);
        }

        /* Midnight Synth Theme */
        :root[data-theme="midnight"] {
            --tech-bg: #1e1b4b;
            --tech-dark-alt: #312e81;
            --tech-light: #e0e7ff;
            --tech-primary: #f472b6;
            --tech-secondary: #818cf8;
            --border-color: rgba(244, 114, 182, 0.4);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">

    <script>
        // Tailwind Configuration with the same Modern Tech Palette
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tech-bg': '#1A1F26',
                        'tech-dark-alt': '#2C333F',
                        'tech-light': '#E0E6F0',
                        'tech-primary': '#00BFFF',
                        'tech-secondary': '#33FFCC',
                    }
                }
            }
        }

        /**
         * Updated learning objectives for Chemestry (LO1..LO7) and Additional References.
         * Each concept has video (external link) and presentation (download) URLs.
         */
        const learningObjectives = {
            LO1: {
                title: "LO1: Fundamentals of Science",
                testBankUrl: "https://your-host.com/files/LO1_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/rHUt0bNXzsk?si=nMfIJEf1H5MK5Me1", presentation: "https://your-host.com/slides/lo1/lo_summarized.pdf" } },
                    { title: "Science.", downloads: { video: "https://youtu.be/QjFP7ywz3A0?si=IbxVHRyPZFETFI_J", presentation: "https://your-host.com/slides/lo1/science_slides.pdf" } },
                    { title: "Scientific methods.", downloads: { video: "https://youtu.be/yi0hwFDQTSQ?si=v4WsPKCujeLeZqd3", presentation: "https://your-host.com/slides/lo1/methods_slides.pdf" } },
                    { title: "Scientific law.", downloads: { video: "https://youtu.be/GyN2RhbhiEU?si=GJZq2FbsYPO3VwM9", presentation: "https://your-host.com/slides/lo1/law_slides.pdf" } },
                    { title: "Scientific theory.", downloads: { video: "https://youtu.be/GyN2RhbhiEU?si=IJYgQzymjcPCgSfL", presentation: "https://your-host.com/slides/lo1/theory_slides.pdf" } },
                    { title: "Relations between variables.", downloads: { video: "https://youtu.be/F9F7Xfh-VTQ?si=1h2TxAGCZszbvyJn", presentation: "https://your-host.com/slides/lo1/relations_slides.pdf" } },
                    { title: "Uncertainty.", downloads: { video: "https://youtu.be/IBRzTvoHbHY?si=YloSpFu5Wtovabb0", presentation: "https://your-host.com/slides/lo1/uncertainty_slides.pdf" } },
                    { title: "SI units.", downloads: { video: "https://youtu.be/8rZRYPoerPw?si=44CBMUQ8fOOPcLR3", presentation: "https://your-host.com/slides/lo1/si_units_slides.pdf" } },
                    { title: "Instrumentation (precision, accuracy, significant figures).", downloads: { video: ["https://youtu.be/EeHtK5UYEMM?si=WJx1VXDMS1KCAWUE", "https://youtu.be/b38hFWvEjwI?si=a1C8ggYem3MpfN0W"], presentation: "https://your-host.com/slides/lo1/instrumentation_slides.pdf" } },
                    { title: "Types of variables.", downloads: { video: "https://youtu.be/R16p4q7Voi4?si=_Y7-wK5RUR8rAbjP", presentation: "https://your-host.com/slides/lo1/variables_slides.pdf" } },
                    { title: "Density.", downloads: { video: "https://youtu.be/LiXut4P0drg?si=2bPEZmyN1FMJTeFG", presentation: "https://your-host.com/slides/lo1/density_slides.pdf" } },
                    { title: "Specific gravity.", downloads: { video: "https://youtu.be/Zdb7z-LSyGs?si=oE85cbmsogjcFhCj", presentation: "https://your-host.com/slides/lo1/specific_gravity_slides.pdf" } },
                ]
            },
            LO2: {
                title: "LO2: Atomic Structure",
                testBankUrl: "https://your-host.com/files/LO2_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/l717yGHPnIo?si=Id11UkQPBCiq1RxV", presentation: "https://your-host.com/slides/lo2/lo_summarized.pdf" } },
                    { title: "Atoms.", downloads: { video: "https://youtu.be/acdkMeEKCNQ?si=MAqWhpvtWsV1Kjp0", presentation: "https://your-host.com/slides/lo2/atoms_slides.pdf" } },
                    { title: "Atomic Structure.", downloads: { video: "https://youtu.be/OH-aSu-rWgk?si=ic0TOV6TqIQ4KoOW", presentation: "https://your-host.com/slides/lo2/atomic_structure_slides.pdf" } },
                    { title: "Isotopes.", downloads: { video: "https://youtu.be/bagegEZBtOs?si=SS7dXlA0ZvwDNRdE", presentation: "https://your-host.com/slides/lo2/isotopes_slides.pdf" } },
                    { title: "Isobar.", downloads: { video: "https://youtu.be/9xwmJ_aI-6o?si=Sbht-RcrawuQowu-", presentation: "https://your-host.com/slides/lo2/isobar_slides.pdf" } },
                    { title: "Isotones.", downloads: { video: "https://youtu.be/7GPaKfpqVm0?si=GS_z5Npf7b8__bYh", presentation: "https://your-host.com/slides/lo2/isotones_slides.pdf" } },
                    { title: "Alpha.", downloads: { video: "https://youtu.be/cPRFF-eCGT8?si=OVSRJwrlzqRggsEm", presentation: "https://your-host.com/slides/lo2/alpha_slides.pdf" } },
                    { title: "Beta.", downloads: { video: "https://youtu.be/cPRFF-eCGT8?si=OVSRJwrlzqRggsEm", presentation: "https://your-host.com/slides/lo2/beta_slides.pdf" } },
                    { title: "Gamma.", downloads: { video: "https://youtu.be/cPRFF-eCGT8?si=OVSRJwrlzqRggsEm", presentation: "https://your-host.com/slides/lo2/gamma_slides.pdf" } },
                ]
            },
            LO3: {
                title: "LO3: Electronic Structure and Spectra",
                testBankUrl: "https://your-host.com/files/LO3_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/H3K_yVd5gsk?si=imm9as5zmIcXE1SV", presentation: "https://your-host.com/slides/lo3/lo_summarized.pdf" } },
                    { title: "Electron configuration.", downloads: { video: "https://youtu.be/NIwcDnFjj98?si=7U6PTZOn75rXb9U0", presentation: "https://your-host.com/slides/lo3/electron_config_slides.pdf" } },
                    { title: "Valence numbers.", downloads: { video: "https://youtu.be/FPk2ziB9iX0?si=qh376HO5-FFphosS", presentation: "https://your-host.com/slides/lo3/valence_numbers_slides.pdf" } },
                    { title: "Quantum numbers", downloads: { video: "https://youtu.be/eRIN9CPDrpo?si=I75cgY19EJbrML9g", presentation: "https://your-host.com/slides/lo3/quantum_numbers_slides.pdf" } },
                    { title: "Electromagnetic spectrum.", downloads: { video: "https://youtu.be/KWQitt-kDFE?si=GCWNo0PUdpMiFzcP", presentation: "https://your-host.com/slides/lo3/em_spectrum_slides.pdf" } },
                    { title: "Frequency.", downloads: { video: "https://youtu.be/LgYMxH1LCdo?si=tgnHHBbMf754bhZb", presentation: "https://your-host.com/slides/lo3/frequency_slides.pdf" } },
                    { title: "Wavelength.", downloads: { video: "https://youtu.be/LgYMxH1LCdo?si=tgnHHBbMf754bhZb", presentation: "https://your-host.com/slides/lo3/wavelength_slides.pdf" } },
                    { title: "Photon Absorption.", downloads: { video: "https://youtu.be/1uPyq63aRvg?si=FnXICPvOzktc4iio", presentation: "https://your-host.com/slides/lo3/absorption_slides.pdf" } },
                    { title: "Emission.", downloads: { video: "https://youtu.be/1uPyq63aRvg?si=FnXICPvOzktc4iio", presentation: "https://your-host.com/slides/lo3/emission_slides.pdf" } },
                    { title: "Energy, frequency and wavelength relations.", downloads: { video: "https://youtu.be/LgYMxH1LCdo?si=evSHTuRaBtUTFVLz", presentation: "https://your-host.com/slides/lo3/relations_slides.pdf" } },
                    { title: "Photoelectric phenomenon.", downloads: { video: "https://youtu.be/MFPKwu5vugg?si=xJsq1uNwUNGIGadI", presentation: "https://your-host.com/slides/lo3/photoelectric_slides.pdf" } },
                    { title: ". Flame test.", downloads: { video: "https://youtu.be/TMz_XR3o5mg?si=C3OcD_IzV3LCJVh1", presentation: "https://your-host.com/slides/lo3/flame_test_slides.pdf" } },
                    { title: "Excited state.", downloads: { video: "https://youtu.be/pR2pnIlLg6A?si=0wSEJWfsr024ooco", presentation: "https://your-host.com/slides/lo3/excited_state_slides.pdf" } },
                ]
            },
            LO4: {
                title: "LO4: Periodic Table & Periodicity",
                testBankUrl: "https://your-host.com/files/LO4_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/sTTLJayta1w?si=fZX8FvmzfPj_C9OH", presentation: "https://your-host.com/slides/lo4/lo_summarized.pdf" } },
                    { title: "Structure of the periodic table.", downloads: { video: "https://youtu.be/hePb00CqvP0?si=L7pkp76spGj168iw", presentation: "https://your-host.com/slides/lo4/structure_slides.pdf" } },
                    { title: "Trends and Periodicity.", downloads: { video: "https://youtu.be/7cEtOHLZQ2A?si=WvfLiNLHXYM7AQbR", presentation: "https://your-host.com/slides/lo4/trends_slides.pdf" } },
                    { title: "Atomic Radius.", downloads: { video: "https://youtu.be/hePb00CqvP0?si=lmZK0VQSMCGlSssZ", presentation: "https://your-host.com/slides/lo4/atomic_radius_slides.pdf" } },
                    { title: "Atomic Radius.", downloads: { video: "https://youtu.be/hePb00CqvP0?si=lmZK0VQSMCGlSssZ", presentation: "https://your-host.com/slides/lo4/atomic_radius_2_slides.pdf" } },
                    { title: "Electronegativity.", downloads: { video: "https://youtu.be/c9n2-gkVsaw?si=v7BVPor4-KtVfvI2", presentation: "https://your-host.com/slides/lo4/electronegativity_slides.pdf" } },
                    { title: "Electron Affinity", downloads: { video: "https://youtu.be/KhLijA77WQE?si=Ixp639SOjVDq-dyz", presentation: "https://your-host.com/slides/lo4/electron_affinity_slides.pdf" } },
                    { title: ". Metal, nonmetal and metalloid", downloads: { video: "https://youtu.be/26faogpnFIo?si=9y-HJo1osqdmnMpZ", presentation: "https://your-host.com/slides/lo4/metal_nonmetal_slides.pdf" } },
                ]
            },
            LO5: {
                title: "LO5: Chemical Bonding & Organic Basics",
                testBankUrl: "https://your-host.com/files/LO5_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: ["https://youtu.be/961zMT281gw?si=m08LE3DfCW1mBbpj", "https://youtu.be/dcnymRMd0kw?si=jieHgCKQGJ9MfO6U"], presentation: "https://your-host.com/slides/lo5/lo_summarized.pdf" } },
                    { title: "Chemical bond.", downloads: { video: "https://youtu.be/PoQjsnQmxok?si=nN5gFsZvSm1jZgY9", presentation: "https://your-host.com/slides/lo5/chemical_bond_slides.pdf" } },
                    { title: "Ionic and Covalent bond", downloads: { video: "https://youtu.be/S_k0kr2eZSQ?si=ksIqByV-8P2NX9zO", presentation: "https://your-host.com/slides/lo5/ionic_covalent_slides.pdf" } },
                    { title: "Electron dot diagram", downloads: { video: "https://youtu.be/Sk7W2VgbhOg?si=OxMZ0ZynXb3L4oEd", presentation: "https://your-host.com/slides/lo5/dot_diagram_slides.pdf" } },
                    { title: "Nomenclature of alkanes (IUPAC common name).", downloads: { video: "https://youtu.be/TYU_JluleME?si=EdO1rv_12uz21XGe", presentation: "https://your-host.com/slides/lo5/nomenclature_slides.pdf" } },
                    { title: "Isomers of alkanes.", downloads: { video: "https://youtu.be/Tj7mXcWkrTE?si=mR8WTmEaxQin_t4k", presentation: "https://your-host.com/slides/lo5/isomers_slides.pdf" } },
                    { title: "Cis and Trans.", downloads: { video: "https://youtu.be/m8Z8ouxfxiA?si=eQJIuP2ljGSBLJWR", presentation: "https://your-host.com/slides/lo5/cis_trans_slides.pdf" } },
                    { title: "Structure Isomers and Chains.", downloads: { video: "https://youtu.be/48rsf1pOhfA?si=J4a0DKUFcmAaaa3U", presentation: "https://your-host.com/slides/lo5/structure_isomers_slides.pdf" } },
                ]
            },
            LO6: {
                title: "LO6: Nuclear Chemistry & Radioactivity",
                testBankUrl: "https://your-host.com/files/LO6_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/zsOtTs5O_Ak?si=PJP_XRd1-eTeG8KC", presentation: "https://your-host.com/slides/lo6/lo_summarized.pdf" } },
                    { title: "Radioactive.", downloads: { video: "https://youtu.be/P_SD5Rt6XMk?si=8DQ2TwK07hQGCe5y", presentation: "https://your-host.com/slides/lo6/radioactive_slides.pdf" } },
                    { title: "Unstable Atoms.", downloads: { video: "https://youtu.be/1HsRA-vbh-M?si=n8rce_Jh0BiZxjWO", presentation: "https://your-host.com/slides/lo6/unstable_atoms_slides.pdf" } },
                    { title: "Fusion reaction.", downloads: { video: "https://youtu.be/b9qxAFLpz9U?si=kzOPsCUO4AdiG1M5", presentation: "https://your-host.com/slides/lo6/fusion_slides.pdf" } },
                    { title: "Fusion reaction.", downloads: { video: "https://youtu.be/b9qxAFLpz9U?si=kzOPsCUO4AdiG1M5", presentation: "https://your-host.com/slides/lo6/fission_slides.pdf" } },
                    { title: ". Half-life.", downloads: { video: "https://youtu.be/WTQvfvoOF3g?si=7MLCmJMw1aDnJ1w4", presentation: "https://your-host.com/slides/lo6/half_life_slides.pdf" } },
                    { title: "Nuclear forces", downloads: { video: "https://youtu.be/c3nGE8Z3-lo?si=EuRZZz2N4b3RGHU2", presentation: "https://your-host.com/slides/lo6/nuclear_forces_slides.pdf" } },
                ]
            },
            LO7: {
                title: "LO7: Chemical Reactions & Phase Changes",
                testBankUrl: "https://your-host.com/files/LO7_TestBank.pdf",
                concepts: [
                    { title: "LO summerized", downloads: { video: "https://youtu.be/yMyfy3NFWGk?si=6B_Xvb9hUOzn2HM7", presentation: "https://your-host.com/slides/lo7/lo_summarized.pdf" } },
                    { title: "Element.", downloads: { video: "https://youtu.be/kWa_zTldnhw?si=F3EYdiuWjBvfv2LQ", presentation: "https://your-host.com/slides/lo7/element_slides.pdf" } },
                    { title: ". Compound.", downloads: { video: "https://youtu.be/dggHWvFJ8Xs?si=pKO1JAbAnched2mI", presentation: "https://your-host.com/slides/lo7/compound_slides.pdf" } },
                    { title: "Electrolysis.", downloads: { video: "https://youtu.be/7uIIq_Ofzgw?si=L5DEFz3kSaZviUDX", presentation: "https://your-host.com/slides/lo7/electrolysis_slides.pdf" } },
                    { title: "Chemical formula.", downloads: { video: "https://youtu.be/GJ4Mds0CWLE?si=lYxiQowqOQOzTvDk", presentation: "https://your-host.com/slides/lo7/chemical_formula_slides.pdf" } },
                    { title: "Chemical equation.", downloads: { video: "https://youtu.be/e_C-V5vJv80?si=Xannl1L31rAh-LrW", presentation: "https://your-host.com/slides/lo7/chemical_equation_slides.pdf" } },
                    { title: "Law of Conservation of Mass.", downloads: { video: "https://youtu.be/eBTNzScLUg4?si=WBTW0C0IArbg2v3C", presentation: "https://your-host.com/slides/lo7/conservation_mass_slides.pdf" } },
                    { title: "Temperature.", downloads: { video: "https://youtu.be/bRZwzy0xvhM?si=tLPFXajXaSbR91CS", presentation: "https://your-host.com/slides/lo7/temperature_slides.pdf" } },
                    { title: "Kinetic energy.", downloads: { video: "https://youtu.be/g7u6pIfUVy4?si=q5-rTijs8O2Q0dIn", presentation: "https://your-host.com/slides/lo7/kinetic_energy_slides.pdf" } },
                    { title: "Vaporization.", downloads: { video: "https://youtu.be/oc0ypeDELb0?si=WkQrNJyOFTOBlrrv", presentation: "https://your-host.com/slides/lo7/vaporization_slides.pdf" } },
                    { title: "Sublimation.", downloads: { video: "https://youtu.be/29x7vArV2NI?si=6irV_14lR5TGzYvG", presentation: "https://your-host.com/slides/lo7/sublimation_slides.pdf" } },
                    { title: "Heating Curve of Water.", downloads: { video: "https://youtu.be/ys2RHRiRc88?si=1Hz3_wUf3dLK-jx-", presentation: "https://your-host.com/slides/lo7/heating_curve_slides.pdf" } },
                ]
            },
            'references': {
                title: "Additional References",
                conceptLinks: []
            }
        };

        // Local additional references files (from first semester/additional refrences)
        const additionalReferenceFiles = [
            'first semester/additional refrences/Active_Chemistry.PDF',
            'first semester/additional refrences/Holt_Chemistry_Textbook.pdf',
            'first semester/additional refrences/Principles of organic chemistry.pdf',
            'first semester/additional refrences/Principles_of_General_Chemistry_by_Martin_Silberberg_z_lib_org.pdf',
            'first semester/additional refrences/Zumdahl Chemistry 9th c2014 solutions - Copy.pdf'
        ];

        /* Resource files collected from first semester/LO folders (relative paths) */
        const resourceFiles = {
            LO1: [
                'first semester/LO1/CHAPTER 2  Atoms, Molecules, and Ions.docx',
                'first semester/LO1/Chemistry L.O.1 (SSC).pdf',
                'first semester/LO1/Chemistry LO1.pptx'
            ],
            LO2: [
                'first semester/LO2/4_5810146429913534102.pdf',
                'first semester/LO2/chemistry l.o 2.pdf',
                'first semester/LO2/Chemistry L.O.2 (SSC).pdf',
                'first semester/LO2/Chemistry LO2.pptx'
            ],
            LO3: [
                'first semester/LO3/Chemistry L.O.3 (SSC).pdf',
                'first semester/LO3/Chemistry lo 3.pptx'
            ],
            LO4: [
                'first semester/LO4/Chemistry L.O.4 (SSC).pdf',
                'first semester/LO4/Chemistry LO4.pptx'
            ],
            LO5: [
                'first semester/LO5/CH.1.05 part 1.pptx',
                'first semester/LO5/CH.1.05 part 3 isomersm.pptx',
                'first semester/LO5/chemistry L.O.5 (SSC).pdf'
            ],
            LO6: [
                'first semester/LO6/Chemistry  LO6.pptx',
                'first semester/LO6/Chemistry L.O.6_ 7.pdf'
            ],
            LO7: [
                'first semester/LO7/Chemistry L.O.6_ 7 (LO7).pdf',
                'first semester/LO7/Chemistry LO7.pptx'
            ],
            testBanks: [
                'first semester/test banks/c10.rtf',
                'first semester/test banks/c11.rtf',
                'first semester/test banks/c12.rtf',
                'first semester/test banks/c13.rtf',
                'first semester/test banks/c14.rtf',
                'first semester/test banks/c15.rtf',
                'first semester/test banks/c16.rtf',
                'first semester/test banks/c17.rtf',
                'first semester/test banks/c18.rtf',
                'first semester/test banks/c19.rtf',
                'first semester/test banks/c2.rtf',
                'first semester/test banks/c20.rtf',
                'first semester/test banks/c21.rtf',
                'first semester/test banks/c22.rtf',
                'first semester/test banks/c3.rtf',
                'first semester/test banks/c4.rtf',
                'first semester/test banks/c5.rtf',
                'first semester/test banks/c6.rtf',
                'first semester/test banks/c7.rtf',
                'first semester/test banks/c8.rtf',
                'first semester/test banks/c9.rtf',
                'first semester/test banks/Chapter 1 (L.O.1).rtf',
                'first semester/test banks/L.O 5 questions with answers (1).pdf',
                'first semester/test banks/Zumdahl Chemistry 9th Edition Test Bank.pdf'
            ],
            revisions: [
                'first semester/revision/Chemistry (Summarization).pptx'
            ]
        };

        /* Video links provided by user: LO summarized videos and concept-specific videos.
           Keys must match concept.title strings used in learningObjectives. */
        const videoLinks = {
            loSummarized: {
                LO1: 'https://youtu.be/rHUt0bNXzsk?si=VkWImI1rgDReylRp',
                LO2: 'https://youtu.be/l717yGHPnIo?si=umU7eUNoCpwGCeJ8',
                LO3: 'https://youtu.be/H3K_yVd5gsk?si=2fcasM6wtQQMM4Sx',
                LO4: 'https://youtu.be/sTTLJayta1w?si=fSSENQvHg4SA0Zbd',
                LO5: ['https://youtu.be/961zMT281gw?si=9BHT0ac-ebHBTVN6', 'https://youtu.be/dcnymRMd0kw?si=oyYZ1M5IKFoKtgex'],
                LO6: 'https://youtu.be/zsOtTs5O_Ak?si=3KxbEiXW6JqWvkt1',
                LO7: 'https://youtu.be/yMyfy3NFWGk?si=mgmtaAhuEP67mzIn'
            },
            concept: {
                /* LO1 concept videos */
                'Science..': 'https://youtu.be/QjFP7ywz3A0?si=SiaZAoPBAqJmjzcv',
                'Scientific methods.': 'https://youtu.be/N6IAzlugWw0?si=JgtfWagOp30f0cmG',
                'Scientific law.': 'https://youtu.be/P30QlwSsUic?si=HHfi0afAirtdoASo',
                'Scientific theory.': 'https://youtu.be/P30QlwSsUic?si=HHfi0afAirtdoASo',
                'Relations between variables.': 'https://youtu.be/afp3jhPNS3g?si=CMfKHGvtK8fxGw7X',
                'Uncertainty.': 'https://youtu.be/IBRzTvoHbHY?si=g6SWN8c9maNrOaEu',
                'SI units.': 'https://youtu.be/8rZRYPoerPw?si=98pgDzFIAYjmXZnU',
                'Instrumentation (precision, accuracy, significant figures).': 'https://youtu.be/0IiHPKAvo7g?si=WuTrI73kAfB2nqNh',
                'Types of variables.': 'https://youtu.be/J9kCgWAuB0Y?si=q9z1PiAyNaiZykGT',
                'Density.': 'https://youtu.be/9CKDQE35qXQ?si=zRnmu9d-GHXEMgoy',
                'Specific gravity.': 'https://youtu.be/Zdb7z-LSyGs?si=TMxQsccLR_f0wKSH',

                /* LO2 concept videos */
                'Atoms.': 'https://youtu.be/acdkMeEKCNQ?si=xMTYoXZudxZjwgxB',
                'Atomic Structure.': 'https://youtu.be/OH-aSu-rWgk?si=fHeJYJgeBcxgh2yZ',
                'Isotopes.': 'https://youtu.be/bagegEZBtOs?si=n0qITzW1UxpfAEg9',
                'Isobar.': 'https://youtu.be/9xwmJ_aI-6o?si=noWX5WfctA2i-Pb1',
                'Isotones.': 'https://youtu.be/ZAKtoS-dzKg?si=EZWbA7vklFalSd7c',
                'Alpha.': 'https://youtu.be/cPRFF-eCGT8?si=aIm_HaDBb0B5-1Za',
                'Beta.': 'https://youtu.be/dvhqzQ-K7K8?si=hKnBH5UTT6fvyGhH',
                'Gamma.': 'https://youtu.be/VeXpMijpazE?si=fhAb47-cJF8D835C',

                /* LO3 concept videos */
                'Electron configuration.': 'https://youtu.be/NIwcDnFjj98?si=iDzfPlTKmyox-Lut',
                'Valence numbers.': 'https://youtu.be/FPk2ziB9iX0?si=iItcVqMcc08Ucipo',
                'Quantum numbers': 'https://youtu.be/eRIN9CPDrpo?si=_B7KrvYb2KwYXmEg',
                'Electromagnetic spectrum.': 'https://youtu.be/KWQitt-kDFE?si=sPIh-v9m_ZHMd7O_',
                'Frequency.': 'https://youtu.be/LgYMxH1LCdo?si=VQ4ohZnFLdELZe2K',
                'Wavelength.': 'https://youtu.be/LgYMxH1LCdo?si=htddK-o0KSQG3B9t',
                'Photon Absorption.': 'https://youtu.be/vV2TnOie9h8?si=eJVRQG5pXajm9qfn',
                'Emission.': 'https://youtu.be/1uPyq63aRvg?si=WQo-SF17C7J2hIf3',
                'Energy, frequency and wavelength relations.': 'https://youtu.be/tbaTbESqycc?si=GYZTcY1T7uUGT-tX',
                'Photoelectric phenomenon.': 'https://youtu.be/MFPKwu5vugg?si=U7yyO7LuvQmF39K1',
                '. Flame test.': 'https://youtu.be/6RbbbzPl9Ow?si=Lc_56TGtKDUI-OnQ',
                'Excited state.': 'https://youtu.be/E2ulVQr69yI?si=n100xmYk_RwO8XTo',

                /* LO4 concept videos */
                'Structure of the periodic table.': 'https://youtu.be/hePb00CqvP0?si=pfGSc9qYXQ7OxOLI',
                'Trends and Periodicity.': 'https://youtu.be/Gy9HR65DpYQ?si=8O4WjqyiW3F_iQnQ',
                'Atomic Radius.': 'https://youtu.be/4Url0pjbcuU?si=EVl7k8UwhsbZTICI',
                'Electronegativity.': 'https://youtu.be/c9n2-gkVsaw?si=aWqhWnYNlo4LNU82',
                'Electron Affinity': 'https://youtu.be/KhLijA77WQE?si=rkaVZLmwLmGTZjZM',
                '. Metal, nonmetal and metalloid': 'https://youtu.be/26faogpnFIo?si=FVL1l04cuE-0H8po',

                /* LO5 concept videos */
                'Chemical bond.': 'https://youtu.be/PoQjsnQmxok?si=wlGNNJTOHY31bZr2',
                'Ionic and Covalent bond': 'https://youtu.be/S_k0kr2eZSQ?si=PMfRnr4kIHyp2dmp',
                'Electron dot diagram': 'https://youtu.be/NFZtjSeT3XE?si=8IrPIlt4CdnYBd4q',
                'Nomenclature of alkanes (IUPAC common name).': 'https://youtu.be/TYU_JluleME?si=L7SO_8qOTc86rthv',
                'Isomers of alkanes.': 'https://youtu.be/z8M4EciPpYI?si=26-iJWusgoKIOFcb',
                'Cis and Trans.': 'https://youtu.be/m8Z8ouxfxiA?si=hWt9i4jcCXd46SWu',
                'Structure Isomers and Chains.': 'https://youtu.be/JjtzMQDdyuM?si=0URCAFv9B98UR9mT',

                /* LO6 concept videos */
                'Radioactive.': 'https://youtu.be/cPRFF-eCGT8?si=QX0gcrSnNNIBrn1E',
                'Unstable Atoms.': 'https://youtu.be/UtZw9jfIxXM?si=Hae2IAAhrM_TzUAu',
                'Fusion reaction.': 'hhttps://youtu.be/b9qxAFLpz9U?si=gJlO6aIqJ8nMfX58',
                'Fission reaction.': 'https://youtu.be/mZsaaturR6E?si=MJPzsVl1U7uX_uKu',
                '. Half-life.': 'https://youtu.be/WTQvfvoOF3g?si=_l6BjFq3GL08rtKE',
                'Nuclear forces': 'https://youtu.be/c3nGE8Z3-lo?si=nkrBFpv9nfHTFV0W',

                /* LO7 concept videos */
                'Element.': 'https://youtu.be/kWa_zTldnhw?si=DQrfXRdAOjcVv6zF',
                '. Compound.': 'https://youtu.be/dggHWvFJ8Xs?si=gy_iWRd-j84PEefi',
                'Electrolysis.': 'https://youtu.be/7uIIq_Ofzgw?si=shvd8WwTHvvrvvI2',
                'Chemical formula.': 'https://youtu.be/GJ4Mds0CWLE?si=eQzjJGnLyVvnPH-L',
                'Chemical equation.': 'https://youtu.be/e_C-V5vJv80?si=Yvj_mAuaT04JwAB7',
                'Law of Conservation of Mass.': 'https://youtu.be/eBTNzScLUg4?si=9ghgVfbECo7-A3jf',
                'Temperature.': 'https://youtu.be/LL54E5CzQ-A?si=CWjRtdFjHPOCW5Ks',
                'Kinetic energy.': 'https://youtu.be/g7u6pIfUVy4?si=F7VDk4Thj4OpYF3N',
                'Vaporization.': 'https://youtu.be/G8R5SESF5H4?si=GdPoTShEXH46F9U_',
                'Sublimation.': 'https://youtu.be/29x7vArV2NI?si=qEx4ks8C2FGPiW8F',
                'Heating Curve of Water.': 'https://youtu.be/ys2RHRiRc88?si=VkJswskSnlwoTUJ_'
            }
        };

        // Updated createLinkBlock: allow video links to open in new tab (not downloaded) while presentations remain downloadable
        function createLinkBlock(title, placeholderText, url, filename, isDownload = true) {
            const safeUrl = url && url !== "javascript:void(0)" ? url : 'javascript:void(0)';
            const isDisabled = safeUrl === 'javascript:void(0)';
            if (!isDownload) {
                // External video link: open in new tab
                return `
                    <div class="mt-3 p-3 bg-tech-dark-alt/50 rounded-lg border border-tech-dark-alt ${isDisabled ? 'opacity-50' : ''}">
                        <h4 class="text-md font-bold text-tech-secondary mb-1">${title}</h4>
                        <p class="text-sm text-tech-light/70 italic mb-2">${placeholderText}</p>
                        <a href="${safeUrl}" target="_blank" rel="noopener noreferrer"
                           class="text-tech-primary hover:text-tech-secondary transition duration-200 text-sm underline font-semibold ${isDisabled ? 'pointer-events-none' : ''}">
                            ${isDisabled ? 'Video Placeholder (No URL Provided)' : 'Watch Video Online'}
                        </a>
                    </div>
                `;
            }

            // Downloadable resource (presentations/test banks)
            return `
                <div class="mt-3 p-3 bg-tech-dark-alt/50 rounded-lg border border-tech-dark-alt ${isDisabled ? 'opacity-50' : ''}">
                    <h4 class="text-md font-bold text-tech-secondary mb-1">${title}</h4>
                    <p class="text-sm text-tech-light/70 italic mb-2">${placeholderText}</p>
                    <a href="${safeUrl}" download="${filename || 'download'}" 
                       class="text-tech-primary hover:text-tech-secondary transition duration-200 text-sm underline font-semibold ${isDisabled ? 'pointer-events-none' : ''}">
                        ${isDisabled ? 'Link Placeholder (No URL Provided)' : 'Download File Link'}
                    </a>
                </div>
            `;
        }

        // Render concept with video (open). Presentations are now shown per-LO in the Presentations section.
        const shareMap = {
            "Chapter 1 (L.O.1).rtf": "https://drive.google.com/file/d/1i5OeZPQVX6jBFKqEHoFQ3dDapLGp6sSS/view?usp=drivesdk",
            "Zumdahl Chemistry 9th Edition Test Bank.pdf": "https://drive.google.com/file/d/10XTkPTRfA3B-tkFSBARyp76k1TwR-5X3/view?usp=drivesdk",
            "c18.rtf": "https://drive.google.com/file/d/1IxhFxww1qJric1ka8xUtvseACdQVKpZR/view?usp=drivesdk",
            "c11.rtf": "https://drive.google.com/file/d/11hlktzj7nWOFlA6HSTaKIyRwCgRc6cRs/view?usp=drivesdk",
            "c22.rtf": "https://drive.google.com/file/d/1VwVurWZKxD8hgJfeCjpe7sP_AadaquKc/view?usp=drivesdk",
            "c16.rtf": "https://drive.google.com/file/d/1R9_cArMyYKcHgtDVNDOevSZ3W-IuD5Eg/view?usp=drivesdk",
            "c13.rtf": "https://drive.google.com/file/d/11g9owP3cUEhPZ5xVDXB9KZMRZ_oOhujQ/view?usp=drivesdk",
            "c9.rtf": "https://drive.google.com/file/d/1kPsm50TtQMWQ5xZlBDdgqpQrQ4Wp56kb/view?usp=drivesdk",
            "c12.rtf": "https://drive.google.com/file/d/1qgk3Vyb0SxC4P3F1C2MKh1RkaSpJGgLg/view?usp=drivesdk",
            "c5.rtf": "https://drive.google.com/file/d/14JJhCqCfdM9WfUKZpXqVIN6tOvmsrDXU/view?usp=drivesdk",
            "c7.rtf": "https://drive.google.com/file/d/1jLcrgweLrokoHGMShdqIF-UW-DwiwziR/view?usp=drivesdk",
            "c8.rtf": "https://drive.google.com/file/d/1fGHet_MvZoDUMaJsIsFadgMAZd-LDmBc/view?usp=drivesdk",
            "c6.rtf": "https://drive.google.com/file/d/10CGlsXj-SURSoRz7cILxetQsR9MeTV4_/view?usp=drivesdk",
            "c21.rtf": "https://drive.google.com/file/d/17UMXYwRU9y8b1Yw8uDidZ3WObMa3kUuq/view?usp=drivesdk",
            "c19.rtf": "https://drive.google.com/file/d/179FzzJCR3Q-7AiRxNuXaf-AYASMUIZSE/view?usp=drivesdk",
            "c3.rtf": "https://drive.google.com/file/d/1DH_EojvX4qlNhBPBPLXkdEFnZKCMs4GA/view?usp=drivesdk",
            "c17.rtf": "https://drive.google.com/file/d/1ieSSDA40t7W7C-encpUbTk81Tyg5YOKa/view?usp=drivesdk",
            "c2.rtf": "https://drive.google.com/file/d/1N-vUMgYgf2EXdFtCjnM-cdWkllZbbGGy/view?usp=drivesdk",
            "c14.rtf": "https://drive.google.com/file/d/1DcQNBejZbpG38nM0hFGgTo-k0kEvL0w1/view?usp=drivesdk",
            "c4.rtf": "https://drive.google.com/file/d/1Faw0HI0qJdjjIwcD88Xx_83gx0Fjihlh/view?usp=drivesdk",
            "c15.rtf": "https://drive.google.com/file/d/15M77csz6MZTSBiEVvJPxrq2lfIYs2Cic/view?usp=drivesdk",
            "c10.rtf": "https://drive.google.com/file/d/1YYJPhjTfr5kwt-TZdfUe0kloD4MsjxDU/view?usp=drivesdk",
            "c20.rtf": "https://drive.google.com/file/d/1p5jXxUvITEAQrqmb-LIBnJ_UwUoQLnpJ/view?usp=drivesdk",
            "L.O 5 questions with answers (1).pdf": "https://drive.google.com/file/d/1KpmpUv80qHdxFRY8jCepDVga-56f69Zo/view?usp=drivesdk",
            "Chemistry L.O.6_ 7 (LO7).pdf": "https://drive.google.com/file/d/1u-pYHF7tjORkr9fnDkePQK80g7YRPqYO/view?usp=drivesdk",
            "Chemistry LO7.pptx": "https://docs.google.com/presentation/d/1ybPqncUilXTbLt7szEHBZkRJk18FbweS/edit?usp=drivesdk",
            "Chemistry (Summarization).pptx": "https://docs.google.com/presentation/d/1fV7ZDgR-tPQJx0aRzeu4PUG7yMkrqQUP/edit?usp=drivesdk",
            "CH.1.05 part 1.pptx": "https://docs.google.com/presentation/d/1oj4tr4IdjKV20xqLTtBjE8wb4OTS8ao_/edit?usp=drivesdk",
            "chemistry L.O.5 (SSC).pdf": "https://drive.google.com/file/d/1OU_6yzhjtilpWxv0clW90wXCCnW88XYr/view?usp=drivesdk",
            "CH.1.05 part 3 isomersm.pptx": "https://docs.google.com/presentation/d/1X6atSQk55ofX_BBViUZX_TSTqQ4Xjgum/edit?usp=drivesdk",
            "Chemistry L.O.6_ 7.pdf": "https://drive.google.com/file/d/1wCimWa2HsUXB4IDAus9e0UIH3CS_AXgn/view?usp=drivesdk",
            "Chemistry  LO6.pptx": "https://docs.google.com/presentation/d/1lQB6VyX-IpUNddZ6yOCLLJqlAAhDNqBj/edit?usp=drivesdk",
            "Chemistry L.O.3 (SSC).pdf": "https://drive.google.com/file/d/19FRk9MYb6PNPPREuBf-l491oZkK7_1B0/view?usp=drivesdk",
            "Chemistry lo 3.pptx": "https://docs.google.com/presentation/d/1fXlfKJLJHte_jhbXmSpcanNMr0puQwXF/edit?usp=drivesdk",
            "Chemistry L.O.1 (SSC).pdf": "https://drive.google.com/file/d/1qBYCEFiUeZV0sIaFXE0QrvY-gokeiW27/view?usp=drivesdk",
            "CHAPTER 2  Atoms, Molecules, and Ions.docx": "https://docs.google.com/document/d/1CvCAnTrDlYBaPZomu0Se34qffz7C2PUB/edit?usp=drivesdk",
            "Chemistry LO1.pptx": "https://docs.google.com/presentation/d/1Pvk826TbF0ywnp_l8CFTOSBBrCDMU0f6/edit?usp=drivesdk",
            "Chemistry L.O.4 (SSC).pdf": "https://drive.google.com/file/d/1vk5mKfOgcwuHCk9KrFekepPX4byYJaHl/view?usp=drivesdk",
            "Chemistry LO4.pptx": "https://docs.google.com/presentation/d/12eaw5YGvEyaMGiWWzpHb3WVzlLKw6PmP/edit?usp=drivesdk",
            "Principles_of_General_Chemistry_by_Martin_Silberberg_z_lib_org.pdf": "https://drive.google.com/file/d/14m3z-gnDKIHoXCYgkwT9YTX4iuoN1_4i/view?usp=drivesdk",
            "Principles of organic chemistry.pdf": "https://drive.google.com/file/d/1HCrQLUOSzkqV_84i9UcU-xaWlKraakzK/view?usp=drivesdk",
            "Holt_Chemistry_Textbook.pdf": "https://drive.google.com/file/d/1XNMHDqHhavlvWhBilOgMAQ8A0Fczt-eo/view?usp=drivesdk",
            "Active_Chemistry.PDF": "https://drive.google.com/file/d/1Mi7xSGxdqSaM3CsHU6U_1RALvtOy09IW/view?usp=drivesdk",
            "Zumdahl Chemistry 9th c2014 solutions - Copy.pdf": "https://drive.google.com/file/d/1y_ZiYIeS7ZVr0ZrcpG2SqO5a6Hai6IDi/view?usp=drivesdk",
            "Chemistry L.O.2 (SSC).pdf": "https://drive.google.com/file/d/1QnKHOw6FY2OAMDbWLILz53x-vvICf7pN/view?usp=drivesdk",
            "4_5810146429913534102.pdf": "https://drive.google.com/file/d/1JTluCJSCbH7o99aLPQ2xQWYLziHkKnE4/view?usp=drivesdk",
            "Chemistry LO2.pptx": "https://docs.google.com/presentation/d/1KYVfjGzV7sCVt73ggmn9tljEt6tK0sSK/edit?usp=drivesdk",
            "chemistry l.o 2.pdf": "https://drive.google.com/file/d/1KRYnGzaIEbN0LXJnxokrmyAWl3Wqt6_5/view?usp=drivesdk"
        };

        function renderConcept(concept) {
            const description = `This section covers the fundamental principles of **${concept.title}**. Understanding this concept is crucial for learning core chemistry topics.`;
            const safeTitle = concept.title.replace(/[^\w\s.-]/g, '').trim().replace(/\s/g, '_');
            // Prefer user-provided concept video if available, otherwise fallback to concept.downloads.video
            const conceptVideo = (videoLinks.concept && videoLinks.concept[concept.title]) || concept.downloads.video;
            return `
                <details class="mb-4 bg-tech-dark-alt rounded-xl border border-tech-primary/30 shadow-lg overflow-hidden">
                    <summary class="flex items-center justify-between p-4 cursor-pointer text-lg font-semibold text-tech-light hover:bg-tech-primary/20 transition duration-300">
                        <span>${concept.title}</span>
                        <svg class="w-5 h-5 ml-2 transition-transform duration-300 arrow-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                    </summary>
                    <div class="px-4 pb-4 pt-2 border-t border-tech-primary/30 space-y-4">
                        <div class="bg-tech-dark-alt/80 p-3 rounded-lg border border-tech-dark-alt">
                            <h4 class="text-md font-bold text-tech-secondary mb-1">Concept Description</h4>
                            <p class="text-tech-light/90 text-sm">${description}</p>
                        </div>

                        ${createLinkBlock('Videos', 'Open this concept video (external).', conceptVideo, null, false)}
                    </div>
                </details>
            `;
        }

        function renderPresentations(loKey) {
            const files = (resourceFiles[loKey] || []);
            if (!files.length) {
                return `<div class="mt-6 p-4 bg-tech-dark-alt/60 rounded-lg border border-tech-dark-alt text-tech-light">No presentations found for ${loKey}.</div>`;
            }
            let html = `
                <div class="mt-6 p-4 bg-tech-dark-alt/60 rounded-lg border border-tech-dark-alt">
                    <h4 class="text-lg font-bold text-tech-secondary mb-3">Presentations & Files</h4>
                    <ul class="space-y-2">
            `;
            files.forEach(f => {
                const filename = f.split('/').pop();
                const url = shareMap[filename] || f;
                html += `
                    <li>
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary hover:text-tech-secondary underline">${filename}</a>
                    </li>
                `;
            });
            html += `</ul></div>`;
            return html;
        }

        function renderLO(loKey, loData) {
            let html = `
        <h2 class="text-3xl font-extrabold mb-6 text-tech-primary border-b border-tech-secondary/50 pb-2">${loData.title}</h2>
    `;

            // 1. LO summarized video(s) (Moved to top)
            const loSumm = videoLinks.loSummarized && videoLinks.loSummarized[loKey];
            if (loSumm) {
                if (Array.isArray(loSumm)) {
                    loSumm.forEach((url, idx) => {
                        html += createLinkBlock('LO summarized', `LO ${loKey} summarized video (${idx + 1}).`, url, null, false);
                    });
                } else {
                    html += createLinkBlock('LO summarized', `LO ${loKey} summarized video.`, loSumm, null, false);
                }
            }

            // 2. Concepts
            loData.concepts.forEach(concept => {
                html += renderConcept(concept);
            });

            // 3. Presentations section (files collected from the LO folder)
            html += renderPresentations(loKey);

            // 4. Link to Test Banks
            html += `
        <div class="mt-8 p-4 bg-tech-bg/80 rounded-lg border border-tech-dark-alt">
            <p class="text-tech-light/80 mb-3">Looking for practice tests? Check the Test Banks section.</p>
            <button onclick="handleNavigationClick('test-banks')" class="px-3 py-2 bg-tech-primary text-tech-bg rounded-md font-semibold hover:bg-tech-secondary transition duration-200">Open Test Banks</button>
        </div>
    `;

            return html;
        }

        function renderAdditionalReferences() {
            let html = `
                <h2 class="text-3xl font-extrabold mb-6 text-tech-primary border-b border-tech-secondary/50 pb-2">Additional References</h2>
                <div class="p-6 bg-tech-dark-alt rounded-xl border border-tech-secondary/50 shadow-subtle-glow">
                    <p class="text-xl font-medium text-tech-light mb-6">
                        Download these files if you want to study deeper in references:
                    </p>
            `;
            const refData = learningObjectives.references.conceptLinks || [];
            refData.forEach(ref => {
                const filename = ref.title.replace(/[^\w\s]/gi, '').trim().replace(/\s/g, '_') + '.pdf';
                html += `
                    <div class="mb-4">
                        <a href="${ref.url}" target="_blank" rel="noopener noreferrer"
                           class="text-tech-secondary hover:text-tech-primary transition duration-200 text-lg underline font-semibold">
                            ${ref.title}
                        </a>
                    </div>
                `;
            });

            // Also render local additional reference files found in the first semester folder
            if (Array.isArray(additionalReferenceFiles) && additionalReferenceFiles.length) {
                html += `<div class="mt-6 border-t border-tech-primary/20 pt-4"><h3 class="text-xl font-bold text-tech-secondary mb-3">Local Reference Files</h3><ul class="space-y-2">`;
                additionalReferenceFiles.forEach(f => {
                    const fname = f.split('/').pop();
                    const url = shareMap[fname] || f;
                    html += `<li><a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary underline hover:text-tech-secondary">${fname}</a></li>`;
                });
                html += `</ul></div>`;
            }
            html += `</div>`;
            return html;
        }

        function renderTestBanks() {
            const files = resourceFiles.testBanks || [];
            if (!files.length) return `<div class="p-6 text-tech-light">No test banks available.</div>`;
            let html = `<div class="p-6 bg-tech-bg/70 rounded-lg border border-tech-dark-alt"><h3 class="text-xl font-bold text-tech-secondary mb-3">Test Banks</h3><ul class="space-y-2">`;
            files.forEach(f => {
                const filename = f.split('/').pop();
                const url = shareMap[filename] || f;
                html += `<li><a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary underline hover:text-tech-secondary">${filename}</a></li>`;
            });
            html += `</ul></div>`;
            return html;
        }

        function renderRevisions() {
            const files = resourceFiles.revisions || [];
            if (!files.length) return `<div class="p-6 text-tech-light">No revision files available.</div>`;
            let html = `<div class="p-6 bg-tech-bg/70 rounded-lg border border-tech-dark-alt"><h3 class="text-xl font-bold text-tech-secondary mb-3">Revision Files</h3><ul class="space-y-2">`;
            files.forEach(f => {
                const filename = f.split('/').pop();
                const url = shareMap[filename] || f;
                html += `<li><a href="${url}" target="_blank" rel="noopener noreferrer" class="text-tech-primary underline hover:text-tech-secondary">${filename}</a></li>`;
            });
            html += `</ul></div>`;
            return html;
        }

        function handleNavigationClick(loKey) {
            const contentArea = document.getElementById('dynamic-content');
            const defaultMessage = document.getElementById('default-message');
            const loItems = document.querySelectorAll('.lo-item');
            loItems.forEach(item => item.classList.remove('active'));
            const target = document.getElementById(`lo-${loKey}`);
            if (target) target.classList.add('active');
            if (defaultMessage) defaultMessage.style.display = 'none';
            if (loKey === 'references') {
                contentArea.innerHTML = renderAdditionalReferences();
            } else if (loKey === 'test-banks') {
                contentArea.innerHTML = renderTestBanks();
            } else if (loKey === 'revisions') {
                contentArea.innerHTML = renderRevisions();
            } else if (learningObjectives[loKey]) {
                contentArea.innerHTML = renderLO(loKey, learningObjectives[loKey]);
            } else {
                contentArea.innerHTML = `<h2 class="text-red-400">Error: LO not found.</h2>`;
            }
            document.getElementById('content-area').scrollTop = 0;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const loList = document.getElementById('lo-list');
            // Add centralized Test Banks and Revision at the top
            const tbItem = document.createElement('li');
            tbItem.innerHTML = `<button id="lo-test-banks" class="lo-item w-full text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 hover:bg-tech-primary/10 hover:border-tech-primary font-medium" data-lo-key="test-banks">Test Banks</button>`;
            loList.appendChild(tbItem);

            const revItem = document.createElement('li');
            revItem.innerHTML = `<button id="lo-revisions" class="lo-item w-full text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 hover:bg-tech-primary/10 hover:border-tech-primary font-medium" data-lo-key="revisions">Revision</button>`;
            loList.appendChild(revItem);

            // Then add LOs
            Object.keys(learningObjectives).forEach(key => {
                const isReference = key === 'references';
                const displayText = isReference ? 'Additional References' : key;
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <button id="lo-${key}" 
                        class="lo-item w-full text-left p-3 rounded-lg border-l-4 border-tech-dark-alt transition duration-200 
                               hover:bg-tech-primary/10 hover:border-tech-primary font-medium"
                        data-lo-key="${key}">
                        ${displayText}
                    </button>
                `;
                loList.appendChild(listItem);
            });

            loList.addEventListener('click', (event) => {
                const button = event.target.closest('.lo-item');
                if (button) {
                    const loKey = button.getAttribute('data-lo-key');
                    handleNavigationClick(loKey);
                }
            });

            // Christmas / Language Logic
            const translations = {
                en: { "settings": "Settings", "language": "Language", "theme": "Theme", "close": "Close", "footer_contact": "If you have any comments please text me" },
                ar: { "settings": "", "language": "", "theme": "", "close": "", "footer_contact": "      " }
            };
            function updateText(lang) {
                const t = translations[lang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (t[key]) el.textContent = t[key];
                });
            }
            function setLanguage(lang) {
                document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
                document.documentElement.setAttribute('lang', lang);
                localStorage.setItem('language', lang);
                updateText(lang);
            }
            function setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);

                // Update Button Content/Icon
                const btn = document.getElementById('theme-toggle-btn');
                if (btn) {
                    if (theme === 'christmas') {
                        btn.innerHTML = '<span style="font-size: 1.25rem; line-height: 1;"></span>';
                    } else if (theme === 'space') {
                        btn.innerHTML = '<span style="font-size: 1.25rem; line-height: 1;"></span>';
                    } else {
                        // Re-create SVG for standard themes
                        let path = '';
                        if (theme === 'dark') {
                            path = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
                        } else if (theme === 'midnight') {
                            path = '<path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>';
                        } else {
                            // Light/Default sun-like
                            path = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
                        }
                        btn.innerHTML = `<svg id="theme-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">${path}</svg>`;
                    }
                }

                // Use centralized effects
                if (window.ThemeEffects) {
                    window.ThemeEffects.setEffect(theme);
                } else {
                    if (theme === 'christmas') {
                        startSnow();
                    } else {
                        stopSnow();
                    }
                }

                // Anime.js Stagger Effect on Sidebar
                if (window.anime) {
                    const items = document.querySelectorAll('#lo-list li');
                    anime({
                        targets: items,
                        translateX: [-20, 0],
                        opacity: [0, 1],
                        delay: anime.stagger(100),
                        easing: 'easeOutQuad',
                        duration: 800
                    });
                }
            }
            // Snow
            function startSnow() {
                const c = document.getElementById('snow-container'); if (!c) return; stopSnow();
                window.snowInterval = setInterval(() => {
                    const s = document.createElement('div');
                    s.className = 'snowflake';
                    s.style.left = Math.random() * 100 + 'vw';
                    s.style.width = s.style.height = (Math.random() * 5 + 3) + 'px';
                    s.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    s.style.opacity = Math.random();
                    c.appendChild(s);
                    setTimeout(() => s.remove(), 5000);
                }, 100);
            }
            function stopSnow() { if (window.snowInterval) clearInterval(window.snowInterval); const c = document.getElementById('snow-container'); if (c) c.innerHTML = ''; }

            // Init
            setLanguage(localStorage.getItem('language') || 'en');
            const saved = localStorage.getItem('theme');
            if (saved) setTheme(saved); else setTheme('dark');

            // Listeners
            document.getElementById('open-settings')?.addEventListener('click', (e) => { e.preventDefault(); document.getElementById('settings-modal').classList.remove('hidden'); });
            document.getElementById('close-settings')?.addEventListener('click', () => document.getElementById('settings-modal').classList.add('hidden'));
            document.getElementById('settings-modal')?.addEventListener('click', (e) => { if (e.target === document.getElementById('settings-modal')) document.getElementById('settings-modal').classList.add('hidden'); });
            document.getElementById('lang-en')?.addEventListener('click', () => setLanguage('en'));
            document.getElementById('lang-ar')?.addEventListener('click', () => setLanguage('ar'));
            document.getElementById('theme-dark')?.addEventListener('click', () => setTheme('dark'));
            document.getElementById('theme-midnight')?.addEventListener('click', () => setTheme('midnight'));
            document.getElementById('theme-christmas')?.addEventListener('click', () => setTheme('christmas'));
            document.getElementById('theme-space')?.addEventListener('click', () => setTheme('space'));

            // Legacy Toggle Listener (Avoid naming conflict)
            const legacyToggle = document.getElementById('theme-toggle-btn');
            if (legacyToggle) legacyToggle.addEventListener('click', () => { setTheme(document.documentElement.getAttribute('data-theme') === 'dark' ? 'christmas' : 'dark'); });

        });
    </script>
</head>

<body class="bg-tech-bg text-tech-light min-h-screen flex flex-col">
    <!-- Dark Neon Background Effects -->
    <div class="cyber-wrapper">
        <div class="cyber-grid"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Header -->
    <header
        class="w-full bg-tech-dark-alt p-4 shadow-xl shadow-tech-primary/10 border-b border-tech-primary/30 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <button onclick="window.location.href='../index.html'"
                    class="text-tech-light hover:text-tech-secondary transition duration-200 p-2 rounded-full hover:bg-tech-primary/20">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5" />
                        <path d="m12 19-7-7 7-7" />
                    </svg>
                </button>
                <a href="../index.html"
                    class="flex items-center space-x-0 text-2xl font-extrabold transition duration-200 hover:opacity-80">
                    <span class="gradient-text-wrapper gradient-h1">Stemawy</span>
                </a>
            </div>

            <!-- Center: Title -->
            <h1 class="text-4xl font-extrabold tracking-tight">
                <span class="gradient-text-wrapper gradient-h1">CHEMESTRY</span>
            </h1>

            <div class="flex items-center space-x-3">
                <button id="theme-toggle-btn" class="theme-toggle" title="Toggle theme">
                    <svg id="theme-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Area: Sidebar and Main Section -->
    <main class="flex flex-1 overflow-hidden max-w-7xl mx-auto w-full p-4 sm:p-6">

        <!-- Left Sidebar (LO Navigation) -->
        <nav id="sidebar"
            class="w-full sm:w-64 bg-tech-dark-alt rounded-xl p-4 mr-6 flex-shrink-0 border border-tech-primary/20 h-full overflow-y-auto">
            <h2
                class="text-lg font-bold mb-4 text-tech-secondary uppercase tracking-wider border-b border-tech-secondary/30 pb-2">
                Learning Objectives</h2>
            <ul id="lo-list" class="space-y-2">
                <!-- LO items will be generated here by JavaScript -->
            </ul>
        </nav>

        <!-- Right Content Area -->
        <section id="content-area"
            class="flex-1 bg-tech-dark-alt rounded-xl p-6 border border-tech-primary/50 shadow-subtle-glow">
            <div id="dynamic-content" class="h-full">
                <!-- Default State -->
                <div id="default-message"
                    class="flex items-center justify-center h-full text-3xl font-light text-tech-light/50">
                    Please choose your checkpoint
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-tech-dark-alt p-4 mt-auto border-t border-tech-primary/30 relative z-20">
        <div class="section-container flex flex-col sm:flex-row justify-between items-center text-sm">
            <div class="text-center sm:text-left order-2 sm:order-1 mt-4 sm:mt-0">
                <span data-i18n="footer_contact">If you have any comments please text me</span> <a
                    href="mailto:yassoalaa822@gmail.com"
                    class="text-tech-secondary hover:text-tech-primary transition duration-200">yassoalaa822@gmail.com</a>
            </div>
            <div class="space-x-4 order-1 sm:order-2">
                <a href="#" id="open-settings" class="hover:text-tech-primary transition duration-200"
                    data-i18n="settings">Settings</a>
            </div>
        </div>
    </footer>
    <div id="snow-container"></div>
    <div id="settings-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div
            class="bg-tech-dark-alt rounded-2xl border border-tech-secondary/50 shadow-2xl p-6 w-full max-w-sm transform transition-all scale-100">
            <div class="flex justify-between items-center mb-6 border-b border-tech-primary/20 pb-4">
                <h3 class="text-2xl font-bold text-tech-primary" data-i18n="settings">Settings</h3>
                <button id="close-settings" class="text-tech-light hover:text-tech-secondary"><svg
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg></button>
            </div>
            <div class="mb-6">
                <h4 class="text-sm font-semibold text-tech-secondary uppercase tracking-wider mb-3"
                    data-i18n="language">Language</h4>
                <div class="grid grid-cols-2 gap-3"><button id="lang-en"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition">English</button><button
                        id="lang-ar"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition font-['Tajawal']"></button>
                </div>
            </div>
            <div class="mb-6">
                <h4 class="text-sm font-semibold text-tech-secondary uppercase tracking-wider mb-3" data-i18n="theme">
                    Theme</h4>
                <div class="grid grid-cols-2 gap-3">
                    <button id="theme-dark"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition">Dark
                        Neon</button>
                    <button id="theme-midnight"
                        class="p-2 rounded-lg border border-pink-500/50 hover:bg-pink-500/10 text-center transition text-pink-300">Midnight
                        </button>
                    <button id="theme-christmas"
                        class="p-2 rounded-lg border border-red-500/50 hover:bg-red-500/10 text-center transition text-red-300">Christmas
                        </button>
                    <button id="theme-space"
                        class="p-2 rounded-lg border border-tech-primary/30 hover:bg-tech-primary/10 text-center transition text-tech-primary"
                        data-i18n="theme_space">Space </button>
                </div>
            </div>
            <button onclick="document.getElementById('settings-modal').classList.add('hidden')"
                class="w-full py-2 bg-tech-primary text-tech-bg font-bold rounded-lg hover:bg-tech-secondary transition"
                data-i18n="close">Close</button>
        </div>
    </div>
    <script src="../space-theme.js"></script>
    <script src="../theme-effects.js"></script>
</body>

</html>